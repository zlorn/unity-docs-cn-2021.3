<!DOCTYPE html>
<html class="no-js" lang="zh-cn">
  <head>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-5V25JL6');
    </script>
    <link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet" />
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="twitter:card" content="summary" />
    <meta property="og:title" content="Profiling.ProfilerEditorUtility-SetSelection - Unity 脚本 API" />
    <title>Profiling.ProfilerEditorUtility-SetSelection - Unity 脚本 API</title>
    <meta name="description" content="Set the current selection in a frame time sample based Profiler Module, such as the CPU Usage module and the GPU Usage Profiler module." />
    <meta property="og:description" content="Set the current selection in a frame time sample based Profiler Module, such as the CPU Usage module and the GPU Usage Profiler module." />
    <meta name="author" content="Unity Technologies" />
    <link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico" />
    <link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png" />
    <meta name="msapplication-TileColor" content="#222c37" />
    <meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png" />
    <script type="text/javascript" src="" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836">
    </script>
    <script type="text/javascript">
        function OptanonWrapper() { }
    </script>
    <script>
      var docs_type = 'ScriptReference';
      var lang = 'cn';
      var page = 'Profiling.ProfilerEditorUtility-SetSelection';
      if(!page) page = 'index';
      var version = '2021.3';
      var docs_versions = [{version: '2022.1',version_string: '2022.1',supported: true},{version: '2021.3',version_string: '2021.3',supported: true},{version: '2021.2',version_string: '2021.2',supported: false},{version: '2021.1',version_string: '2021.1',supported: false},{version: '2020.3',version_string: '2020.3',supported: true},{version: '2020.2',version_string: '2020.2',supported: false},{version: '2020.1',version_string: '2020.1',supported: false},{version: '2019.4',version_string: '2019.4',supported: true},{version: '2019.3',version_string: '2019.3',supported: false},{version: '2019.2',version_string: '2019.2',supported: false},{version: '2019.1',version_string: '2019.1',supported: false},{version: '2018.4',version_string: '2018.4',supported: false},{version: '2018.3',version_string: '2018.3',supported: false},{version: '2018.2',version_string: '2018.2',supported: false},{version: '2018.1',version_string: '2018.1',supported: false},{version: '2017.4',version_string: '2017.4',supported: false},{version: '2017.3',version_string: '2017.3',supported: false},{version: '2017.2',version_string: '2017.2',supported: false},{version: '2017.1',version_string: '2017.1',supported: false},{version: '5.6',version_string: '560',supported: false},];</script>
    <script type="text/javascript" src="../StaticFiles/js/jquery.js">
    </script>
    <script type="text/javascript" src="../StaticFiles/js/core.js">
    </script>
    <script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js">
    </script>
    <script type="text/javascript" src="docdata/toc.js">
    </script>
    <script type="text/javascript" src="">
    </script>
    <script type="text/javascript" src="../StaticFiles/js/custom.js">
    </script>
    <link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css" />
    <link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css" />
    <link rel="canonical" href="https://docs.unity3d.com/cn/2021.3/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html" />
    <link rel="alternate" href="https://docs.unity3d.com/en/2021.3/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html" hreflang="en" />
    <link rel="alternate" href="https://docs.unity3d.com/cn/2021.3/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html" hreflang="zh" />
    <link rel="alternate" href="https://docs.unity3d.com/ja/2021.3/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html" hreflang="ja" />
    <link rel="alternate" href="https://docs.unity3d.com/es/2021.3/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html" hreflang="es" />
    <link rel="alternate" href="https://docs.unity3d.com/kr/2021.3/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html" hreflang="ko" />
    <link rel="alternate" href="https://docs.unity3d.com/ru/2021.3/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html" hreflang="ru" />
    <link rel="alternate" href="https://docs.unity3d.com/2021.3/Documentation/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html" hreflang="x-default" />
  </head>
  <body>
    <noscript>
      <iframe src="//www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden">
      </iframe>
    </noscript>
    <div class="header-wrapper">
      <div id="header" class="header">
        <div class="content">
          <div class="spacer">
            <div class="menu">
              <div id="nav-open" for="nav-input">
                <span>
                </span>
              </div>
              <div class="logo">
                <a href="./index.html">
                </a>
              </div>
              <div class="search-form">
                <form action="30_search.html" method="get" class="apisearch">
                  <input type="text" name="q" placeholder="搜索脚本..." autosave="Unity Reference" results="5" class="sbox field" id="q">
                  </input>
                  <input type="submit" class="submit">
                  </input>
                </form>
              </div>
              <ul class="menu-items">
                <li class="menu-item">
                  <a href="../Manual/index.html" class="">手册</a>
                </li>
                <li class="menu-item">
                  <a href="../ScriptReference/index.html" class="selected">脚本 API</a>
                </li>
              </ul>
            </div>
          </div>
          <div class="more">
            <div class="filler">
            </div>
            <ul>
              <li>
                <a href="https://unity3d.com/">
                unity3d.com
              </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="toolbar">
        <div class="content">
          <div class="version-switcher">
            <div class="current toggle" data-target=".version-list">
              <div class="version-number">
                <div class="d-inline-block">
          Version:
          <b>2021.3</b></div>
                <div class="d-inline-block arrow">
                </div>
              </div>
            </div>
            <div class="version-list" style="display:none;">
              <ul class="versions">
                <li class="supported">
                  <a class="docs_version_url_2022.1" href="/cn/2022.1/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2022.1</a>
                </li>
                <li class="supported">
                  <a class="docs_version_url_2021.3" href="/cn/2021.3/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2021.3</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2021.2" href="/cn/2021.2/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2021.2</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2021.1" href="/cn/2021.1/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2021.1</a>
                </li>
                <li class="supported">
                  <a class="docs_version_url_2020.3" href="/cn/2020.3/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2020.3</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2020.2" href="/cn/2020.2/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2020.2</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2020.1" href="/cn/2020.1/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2020.1</a>
                </li>
                <li class="supported">
                  <a class="docs_version_url_2019.4" href="/cn/2019.4/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2019.4</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2019.3" href="/cn/2019.3/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2019.3</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2019.2" href="/cn/2019.2/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2019.2</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2019.1" href="/cn/2019.1/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2019.1</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2018.4" href="/cn/2018.4/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2018.4</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2018.3" href="/cn/2018.3/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2018.3</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2018.2" href="/cn/2018.2/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2018.2</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2018.1" href="/cn/2018.1/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2018.1</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2017.4" href="/cn/2017.4/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2017.4</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2017.3" href="/cn/2017.3/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2017.3</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2017.2" href="/cn/2017.2/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2017.2</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2017.1" href="/cn/2017.1/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2017.1</a>
                </li>
                <li class="">
                  <a class="docs_version_url_560" href="/cn/560/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">5.6</a>
                </li>
                <div class="versionsWithThisPage" style="display:none;">
                  <li>
                    <p>包含此页的版本：</p>
                  </li>
                </div>
                <div class="versionsWithoutThisPage" style="display:none;">
                  <li>
                    <p>不含此页的版本：</p>
                  </li>
                </div>
              </ul>
              <ul class="description">
                <li>
                  <div class="supported-box">
                  </div>受支持</li>
                <li>
                  <div class="legacy-box">
                  </div>旧版</li>
              </ul>
            </div>
          </div>
          <ul class="nav-menu-items">
            <li class="menu-item">
              <a href="../Manual/index.html" class="">手册</a>
            </li>
            <li class="menu-item">
              <a href="../ScriptReference/index.html" class="selected">脚本 API</a>
            </li>
          </ul>
          <div class="lang-switcher">
            <div class="current toggle" data-target=".lang-list">
              <div class="lbl">语言:
        <span class="b">中文</span></div>
              <div class="arrow">
              </div>
            </div>
            <div class="lang-list" style="display:none;">
              <ul>
                <li>
                  <a data-lang="en" href="/2021.3/Documentation/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">English</a>
                </li>
                <li>
                  <a data-lang="cn" href="/cn/2021.3/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">中文</a>
                </li>
                <li>
                  <a data-lang="ja" href="/ja/2021.3/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">日本語</a>
                </li>
                <li>
                  <a data-lang="es" href="/es/2021.3/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">Español</a>
                </li>
                <li>
                  <a data-lang="kr" href="/kr/2021.3/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">한국어</a>
                </li>
                <li>
                  <a data-lang="ru" href="/ru/2021.3/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">Русский</a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="master-wrapper" class="master-wrapper clear">
      <div id="sidebar" class="sidebar hidden">
        <div class="sidebar-wrap">
          <div class="content">
            <div class="sidebar-menu">
              <div class="toc">
                <h2>脚本 API</h2>
                <div class="version-switcher">
                  <div class="current toggle" data-target=".version-list">
                    <div class="version-number">
                      <div class="d-inline-block">
          Version:
          <b>2021.3</b></div>
                      <div class="d-inline-block arrow">
                      </div>
                    </div>
                  </div>
                  <div class="version-list" style="display:none;">
                    <ul class="versions">
                      <li class="supported">
                        <a class="docs_version_url_2022.1" href="/cn/2022.1/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2022.1</a>
                      </li>
                      <li class="supported">
                        <a class="docs_version_url_2021.3" href="/cn/2021.3/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2021.3</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2021.2" href="/cn/2021.2/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2021.2</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2021.1" href="/cn/2021.1/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2021.1</a>
                      </li>
                      <li class="supported">
                        <a class="docs_version_url_2020.3" href="/cn/2020.3/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2020.3</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2020.2" href="/cn/2020.2/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2020.2</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2020.1" href="/cn/2020.1/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2020.1</a>
                      </li>
                      <li class="supported">
                        <a class="docs_version_url_2019.4" href="/cn/2019.4/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2019.4</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2019.3" href="/cn/2019.3/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2019.3</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2019.2" href="/cn/2019.2/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2019.2</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2019.1" href="/cn/2019.1/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2019.1</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2018.4" href="/cn/2018.4/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2018.4</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2018.3" href="/cn/2018.3/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2018.3</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2018.2" href="/cn/2018.2/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2018.2</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2018.1" href="/cn/2018.1/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2018.1</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2017.4" href="/cn/2017.4/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2017.4</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2017.3" href="/cn/2017.3/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2017.3</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2017.2" href="/cn/2017.2/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2017.2</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2017.1" href="/cn/2017.1/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">2017.1</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_560" href="/cn/560/ScriptReference/Profiling.ProfilerEditorUtility-SetSelection.html">5.6</a>
                      </li>
                      <div class="versionsWithThisPage" style="display:none;">
                        <li>
                          <p>包含此页的版本：</p>
                        </li>
                      </div>
                      <div class="versionsWithoutThisPage" style="display:none;">
                        <li>
                          <p>不含此页的版本：</p>
                        </li>
                      </div>
                    </ul>
                    <ul class="description">
                      <li>
                        <div class="supported-box">
                        </div>受支持</li>
                      <li>
                        <div class="legacy-box">
                        </div>旧版</li>
                    </ul>
                  </div>
                </div>
                <div class="clear">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="content-wrap" class="content-wrap opened-sidebar">
        <div class="content-block">
          <div class="content">
            <div class="section">
              <div class="mb20 clear" id="">
                <h1 class="heading inherit">
                  <a href="Profiling.ProfilerEditorUtility.html">ProfilerEditorUtility</a>.SetSelection</h1>
                <div class="clear">
                </div>
                <div class="clear">
                </div>
                <a href="" class="switch-link gray-btn sbtn left hide">切换到手册</a>
                <div class="clear">
                </div>
              </div>
              <div class="subsection">
                <div class="signature">
                  <div class="signature-CS sig-block">
                    <span style="color:red;">
                    </span>public static bool <span class="sig-kw">SetSelection</span>
        (<a href="Profiling.IProfilerFrameTimeViewSampleSelectionController.html">Profiling.IProfilerFrameTimeViewSampleSelectionController</a> <span class="sig-kw">controller</span>,
    string <span class="sig-kw">markerNameOrMarkerNamePath</span>,
    long <span class="sig-kw">frameIndex</span>,
    string <span class="sig-kw">threadGroupName</span>,
    string <span class="sig-kw">threadName</span>,
    ulong <span class="sig-kw">threadId</span>);
      </div>
                </div>
              </div>
              <div class="subsection">
                <h2>参数</h2>
                <table class="list">
                  <tr>
                    <td class="name lbl">controller</td>
                    <td class="desc">The controller object of the Profiler module whose selection you want to set. When the value is null, Unity throws a NullArgumentException.</td>
                  </tr>
                  <tr>
                    <td class="name lbl">markerNameOrMarkerNamePath</td>
                    <td class="desc">The name of the sample to be selected, or the names of all samples in the sample stack. Separate each name with a <code class="mono">/</code>, ending on the sample that should be selected. Do not add a trailing <code class="mono">/</code>. If Unity cannot find a sample that matches this name or sample stack, it does not set a selection and this method returns false. When this value is null or an empty string, Unity throws an ArgumentException.</td>
                  </tr>
                  <tr>
                    <td class="name lbl">frameIndex</td>
                    <td class="desc">The 0 based frame index. This value defaults to -1 which means the selection is set on the currently shown frame. Note that the Profiler Window UI shows the frame index as n+1. When this value is outside of the range described by <a href="ProfilerWindow-firstAvailableFrameIndex.html">ProfilerWindow.firstAvailableFrameIndex</a> and <a href="ProfilerWindow-lastAvailableFrameIndex.html">ProfilerWindow.lastAvailableFrameIndex</a>, or not -1, Unity throws an ArgumentOutOfRangeException.</td>
                  </tr>
                  <tr>
                    <td class="name lbl">threadGroupName</td>
                    <td class="desc">The name of the thread group. The parameter defaults to an empty string. Null or an empty string signify that the thread isn't part of a thread group. "Job", "Loading" and "Scripting Threads" are examples of such thread group names.</td>
                  </tr>
                  <tr>
                    <td class="name lbl">threadName</td>
                    <td class="desc">The Name of the thread, e.g. "Main Thread", "Render Thread" or "Worker 0". This parameter defaults to "Main Thread". When this value is null or an empty string, Unity throws an ArgumentException.</td>
                  </tr>
                  <tr>
                    <td class="name lbl">threadId</td>
                    <td class="desc">The ID of the thread. When the default value of <a href="Profiling.FrameDataView-invalidThreadId.html">FrameDataView.invalidThreadId</a> is passed, Unity searches for the sample in the first thread matching the provided threadGroupName and threadName. Specify this threadId if there are multiple threads with the same name. Use a RawFrameDataView.threadId or HierarchyFrameDataView.threadId to retrieve the ID to a specific thread, if you need it to be specific.</td>
                  </tr>
                </table>
              </div>
              <div class="subsection">
                <h2>返回</h2>
                <p>
                  <strong>bool</strong>
        Returns true if the selection was successfully set, false if it was rejected because no fitting sample could be found.
      </p>
              </div>
              <div class="subsection">
                <h2>描述</h2>
                <p>Set the current selection in a frame time sample based Profiler Module, such as the <a href="../Manual/ProfilerCPU.html">CPU Usage module</a> and the <a href="../Manual/ProfilerGPU.html">GPU Usage Profiler module</a>.</p>
              </div>
              <div class="subsection">
                <p>
        Use these extension methods to <a href="Profiling.IProfilerFrameTimeViewSampleSelectionController.html">IProfilerFrameTimeViewSampleSelectionController</a> to search for a sample according to its name or Profiler Marker Id, the frame and the thread it occurred in and optionally a sample stack within which it should be found. If a sample matching these criteria is found, this method will return true and you can get the details on the found and set selection via <a href="Profiling.IProfilerFrameTimeViewSampleSelectionController-selection.html">IProfilerFrameTimeViewSampleSelectionController.selection</a>.<br /><br />When no frame data is available in the Profiler Window, Unity throws an Exception. You can check that <a href="ProfilerWindow-firstAvailableFrameIndex.html">ProfilerWindow.firstAvailableFrameIndex</a> is greater or equal to 0 to validate that frame data is available.<br /><br />When the specified thread can not be found, Unity throws an ArgumentException.<br /><br />If you know the rawSampleIndex to the sample you want to select, you can use <a href="Profiling.IProfilerFrameTimeViewSampleSelectionController.SetSelection.html">IProfilerFrameTimeViewSampleSelectionController.SetSelection</a> directly to set the selection.
See Also: <a href="Profiling.IProfilerFrameTimeViewSampleSelectionController.SetSelection.html">IProfilerFrameTimeViewSampleSelectionController.SetSelection</a> and <a href="Profiling.IProfilerFrameTimeViewSampleSelectionController.ClearSelection.html">IProfilerFrameTimeViewSampleSelectionController.ClearSelection</a>.
      </p>
              </div>
              <hr class="section" />
              <div class="subsection">
                <div class="signature">
                  <div class="signature-CS sig-block">
                    <span style="color:red;">
                    </span>public static bool <span class="sig-kw">SetSelection</span>
        (<a href="Profiling.IProfilerFrameTimeViewSampleSelectionController.html">Profiling.IProfilerFrameTimeViewSampleSelectionController</a> <span class="sig-kw">controller</span>,
    long <span class="sig-kw">frameIndex</span>,
    string <span class="sig-kw">threadGroupName</span>,
    string <span class="sig-kw">threadName</span>,
    string <span class="sig-kw">sampleName</span>,
    string <span class="sig-kw">markerNamePath</span>,
    ulong <span class="sig-kw">threadId</span>);
      </div>
                  <div class="signature-CS sig-block">
                    <span style="color:red;">
                    </span>public static bool <span class="sig-kw">SetSelection</span>
        (<a href="Profiling.IProfilerFrameTimeViewSampleSelectionController.html">Profiling.IProfilerFrameTimeViewSampleSelectionController</a> <span class="sig-kw">controller</span>,
    long <span class="sig-kw">frameIndex</span>,
    string <span class="sig-kw">threadGroupName</span>,
    string <span class="sig-kw">threadName</span>,
    int <span class="sig-kw">sampleMarkerId</span>,
    List&lt;int&gt; <span class="sig-kw">markerIdPath</span>,
    ulong <span class="sig-kw">threadId</span>);
      </div>
                </div>
              </div>
              <div class="subsection">
                <h2>参数</h2>
                <table class="list">
                  <tr>
                    <td class="name lbl">controller</td>
                    <td class="desc">The controller object of the Profiler module whose selection you want to set. When the value is null, Unity throws a NullArgumentException.</td>
                  </tr>
                  <tr>
                    <td class="name lbl">frameIndex</td>
                    <td class="desc">The 0 based frame index. Note that the Profiler Window UI shows the frame index as n+1. When this value is outside of the range described by <a href="ProfilerWindow-firstAvailableFrameIndex.html">ProfilerWindow.firstAvailableFrameIndex</a> and <a href="ProfilerWindow-lastAvailableFrameIndex.html">ProfilerWindow.lastAvailableFrameIndex</a>, or smaller than 0, Unity throws an ArgumentOutOfRangeException.</td>
                  </tr>
                  <tr>
                    <td class="name lbl">threadGroupName</td>
                    <td class="desc">The name of the thread group. Null or an empty string signify that the thread isn't part of a thread group. "Job", "Loading" and "Scripting Threads" are examples of such thread group names.</td>
                  </tr>
                  <tr>
                    <td class="name lbl">threadName</td>
                    <td class="desc">The Name of the thread, e.g. "Main Thread", "Render Thread" or "Worker 0". When this value is null or an empty string, Unity throws an ArgumentException.</td>
                  </tr>
                  <tr>
                    <td class="name lbl">sampleName</td>
                    <td class="desc">The name of the sample to select. If Unity cannot find a sample that matches this name, it does not set a selection and this method returns false. When this value is null or an empty string, Unity throws an ArgumentNullException or ArgumentException respectively.</td>
                  </tr>
                  <tr>
                    <td class="name lbl">markerNamePath</td>
                    <td class="desc">The names of all samples in the sample stack, each separated by a <code class="mono">/</code>, that define the base path for the search. Similar to a file folder structure, this base path defines where Unity looks for a sample which matches the sampleName. The searched sampleName can be the last item in that marker path or any child sample of it. Do not add a trailing <code class="mono">/</code>. If no sample can be found matching this sample stack path and the sampleName, no selection is set and this method returns false. This defaults to null which means no requirement is set on the sample's sample stack and the first sample fitting the sampleName is selected.</td>
                  </tr>
                  <tr>
                    <td class="name lbl">threadId</td>
                    <td class="desc">The ID of the thread. When the default value of <a href="Profiling.FrameDataView-invalidThreadId.html">FrameDataView.invalidThreadId</a> is passed, Unity searches for the sample in the first thread matching the provided threadGroupName and threadName. Specify this threadId if there are multiple threads with the same name. Use a RawFrameDataView.threadId or HierarchyFrameDataView.threadId to retrieve the ID to a specific thread, if you need it to be specific.</td>
                  </tr>
                  <tr>
                    <td class="name lbl">sampleMarkerId</td>
                    <td class="desc">Use <a href="Profiling.HierarchyFrameDataView.html">HierarchyFrameDataView</a> or <a href="Profiling.RawFrameDataView.html">RawFrameDataView</a> to get the Marker Ids. When no sample can be found matching this sample stack path and the sampleMarkerId, no selection is set and this method returns false.</td>
                  </tr>
                  <tr>
                    <td class="name lbl">markerIdPath</td>
                    <td class="desc">A list of Profiler marker IDs for all samples in the sample stack, that define the base path for the search. Similar to a file folder structure, this base path defines where Unity looks for a sample which matches the sampleMarkerId. The searched sampleMarkerId can be the last item in that marker path or any child sample of it. If no sample can be found matching this sample stack path and the sampleMarkerId, no selection is set and this method returns false. This defaults to null which means no requirement is set on the sample's sample stack and the first sample fitting the sampleMarkerId is selected.</td>
                  </tr>
                </table>
              </div>
              <div class="subsection">
                <h2>返回</h2>
                <p>
                  <strong>bool</strong>
        Returns true if the selection was successfully set, false if it was rejected because no fitting sample could be found.
      </p>
              </div>
              <div class="subsection">
                <h2>描述</h2>
                <p>Set the current selection in a frame time sample based Profiler Module, such as the <a href="../Manual/ProfilerCPU.html">CPU Usage module</a> and the <a href="../Manual/ProfilerGPU.html">GPU Usage Profiler module</a>.</p>
              </div>
              <div class="subsection">
                <p>
        Use these extension methods to <a href="Profiling.IProfilerFrameTimeViewSampleSelectionController.html">IProfilerFrameTimeViewSampleSelectionController</a> to search for a sample according to its name or Profiler Marker Id, the frame and the thread it occurred in and optionally a sample stack within which it should be found. If a sample matching these criteria is found, this method will return true and you can get the details on the found and set selection via <a href="Profiling.IProfilerFrameTimeViewSampleSelectionController-selection.html">IProfilerFrameTimeViewSampleSelectionController.selection</a>.<br /><br />When no frame data is available in the Profiler Window, Unity throws an Exception. You can check that <a href="ProfilerWindow-firstAvailableFrameIndex.html">ProfilerWindow.firstAvailableFrameIndex</a> is greater or equal to 0 to validate that frame data is available.<br /><br />When no frame data is available in the Profiler Window, Unity throws an Exception. You can check that <a href="ProfilerWindow-firstAvailableFrameIndex.html">ProfilerWindow.firstAvailableFrameIndex</a> is greater or equal to 0 to validate that frame data is available.<br /><br />When the specified thread can not be found, Unity throws an ArgumentException.<br /><br />If you know the rawSampleIndex to the sample you want to select, you can use <a href="Profiling.IProfilerFrameTimeViewSampleSelectionController.SetSelection.html">IProfilerFrameTimeViewSampleSelectionController.SetSelection</a> directly to set the selection.
See Also: <a href="Profiling.IProfilerFrameTimeViewSampleSelectionController.SetSelection.html">IProfilerFrameTimeViewSampleSelectionController.SetSelection</a> and <a href="Profiling.IProfilerFrameTimeViewSampleSelectionController.ClearSelection.html">IProfilerFrameTimeViewSampleSelectionController.ClearSelection</a>.
      </p>
              </div>
              <div class="subsection">
        <pre class="codeExampleCS">
using <a href="Rendering.VirtualTexturing.System.html">System</a>;
using System.Collections.Generic;
using <a href="UnityEditor.html">UnityEditor</a>;
using UnityEditor.Profiling;
using UnityEditorInternal;
using UnityEngine;<br /><br />// This example assumes the profiled scene contained a component of MyScript.cs:
/* using UnityEngine;<br /><br />public class MyScript : <a href="MonoBehaviour.html">MonoBehaviour</a>
{
    void <a href="PlayerLoop.Update.html">Update</a>()
    {
        MethodWithABoxingAllocation();
    }<br /><br />    object MethodWithABoxingAllocation()
    {
        return 1;
    }
}*/<br /><br />public class Example : <a href="EditorWindow.html">EditorWindow</a>
{
    const string k_MainThreadGroupName = "";
    const string k_MainThreadName = "Main Thread";
    const string k_GCAllocSampleName = "GC.Alloc";
    // <a href="Profiling.Profiler.html">Profiler</a> samples that were instrumented by Unity's <a href="VersionControl.Message.html">Message</a> Invoking mechanism,
    // e.g. <a href="PlayerLoop.Update.html">Update</a>(), Start(), <a href="PlayerLoop.FixedUpdate.html">FixedUpdate</a>() ... get an " [Invoke]" postfix
    const string k_InvokePostFix = " [Invoke]";
    public enum UpdateNameMatchType
    {
        Short,
        Full,
    }<br /><br />    <a href="ProfilerWindow.html">ProfilerWindow</a> m_Profiler = null;
    UpdateNameMatchType m_UpdateNameMatchType = UpdateNameMatchType.Short;
    bool m_UseMarkerNames = true;<br /><br />    string GetUpdateSampleName(UpdateNameMatchType updateNameMatchType, bool deepProfiling)
    {
        switch (updateNameMatchType)
        {
            case UpdateNameMatchType.Short:
                if (deepProfiling)
                    return k_UpdateSampleNameShort;
                return k_UpdateSampleNameShort + k_InvokePostFix;
            case UpdateNameMatchType.Full:
                if (deepProfiling)
                    return k_UpdateSampleNameFull;<br /><br />                return k_UpdateSampleNameFull + k_InvokePostFix;
            default:
                throw new NotImplementedException();
        }
    }<br /><br />    const string k_UpdateSampleNameFull = "<a href="Compilation.Assembly.html">Assembly</a>-CSharp.dll!::MyScript.Update()";
    // Invoked method samples or samples instrumented via Deep Profiling will by default be shown
    // without their fully qualifying type name as above
    // Instead the <a href="Profiling.Profiler.html">Profiler</a> UI will strip out everything before the '!::' part of their name.
    // SetSelection will still find these samples, if the UI is set to not Show Full Scripting Method Names
    // Note that <a href="Profiling.RawFrameDataView.html">RawFrameDataView</a> and <a href="Profiling.HierarchyFrameDataView.html">HierarchyFrameDataView</a> will not be able to identify the Marker IDs
    // for such samples from this shorter name.
    const string k_UpdateSampleNameShort = "MyScript.Update()";<br /><br />    static readonly List&lt;string&gt; k_SampleNames = new List&lt;string&gt;
    {
        "<a href="LowLevel.PlayerLoop.html">PlayerLoop</a>",
        "Update.ScriptRunBehaviourUpdate",
        "BehaviourUpdate",
    };<br /><br />    [<a href="MenuItem.html">MenuItem</a>("Window/Analysis/<a href="Profiling.Profiler.html">Profiler</a> Extension")]
    public static void ShowExampleWindow()
    {
        var window = GetWindow&lt;Example&gt;();
        window.m_Profiler = <a href="EditorWindow.GetWindow.html">EditorWindow.GetWindow</a>&lt;<a href="ProfilerWindow.html">ProfilerWindow</a>&gt;();
    }<br /><br />    void OnGUI()
    {
        // First make sure there is an open <a href="Profiling.Profiler.html">Profiler</a> Window
        if (m_Profiler == null)
            m_Profiler = <a href="EditorWindow.GetWindow.html">EditorWindow.GetWindow</a>&lt;<a href="ProfilerWindow.html">ProfilerWindow</a>&gt;();<br /><br />        // For demonstration purposes, let the user choose if the names or if Marker IDs should be used.
        m_UseMarkerNames = <a href="GUILayout.Toggle.html">GUILayout.Toggle</a>(m_UseMarkerNames, "Use Marker names instead of IDs");
        if (!m_UseMarkerNames)
            m_UpdateNameMatchType = UpdateNameMatchType.Full;<br /><br />        // Marker IDs need to be gotten from the fully qualified type name, so the shorter name is not an option when using IDs
        using (new <a href="EditorGUI.DisabledScope.html">EditorGUI.DisabledScope</a>(!m_UseMarkerNames))
        {
            // For demonstration purposes, let the user choose if the short or the long name should be used.
            m_UpdateNameMatchType = (UpdateNameMatchType)<a href="EditorGUILayout.EnumPopup.html">EditorGUILayout.EnumPopup</a>(m_UpdateNameMatchType);
        }<br /><br />        // If the currently selected Module is not the CPU Usage module, setting the selection will not be visible to the user immediately
        if (m_Profiler.selectedModuleIdentifier == <a href="ProfilerWindow-cpuModuleIdentifier.html">ProfilerWindow.cpuModuleIdentifier</a>)
        {
            // Get the CPU Usage <a href="Profiling.Profiler.html">Profiler</a> module's selection controller interface to interact with the selection
            var cpuSampleSelectionController = m_Profiler.GetFrameTimeViewSampleSelectionController(<a href="ProfilerWindow-cpuModuleIdentifier.html">ProfilerWindow.cpuModuleIdentifier</a>);
            // If the current selection object is null, there is no selection to print out.
            using (new <a href="EditorGUI.DisabledScope.html">EditorGUI.DisabledScope</a>(m_Profiler.lastAvailableFrameIndex &lt; 0))
            {
                if (<a href="GUILayout.Button.html">GUILayout.Button</a>("Check my Script for GC.Alloc"))
                {
                    string samplePath = "";
                    for (int i = 0; i &lt; k_SampleNames.Count; i++)
                    {
                        samplePath += $"{k_SampleNames[i]}/";
                    }<br /><br />                    var samplePathDeepProfiling = samplePath + $"{GetUpdateSampleName(m_UpdateNameMatchType, true)}/";
                    samplePath = samplePath + $"{GetUpdateSampleName(m_UpdateNameMatchType, false)}/";
                    // the sample we are looking for, without a trailing '/'
                    samplePath += k_GCAllocSampleName;
                    samplePathDeepProfiling += k_GCAllocSampleName;<br /><br />                    // This check will fail in Deep Profiling because "MethodWithABoxingAllocation()" will be instrumented
                    // and sitting in the sample stack between "<a href="PlayerLoop.Update.html">Update</a>()" and the "GC.Alloc".
                    if (cpuSampleSelectionController.SetSelection(samplePath) || cpuSampleSelectionController.SetSelection(samplePathDeepProfiling))
                    {
                        <a href="Debug.LogWarning.html">Debug.LogWarning</a>("MyScript allocates in its <a href="PlayerLoop.Update.html">Update</a> loop");
                    }
                    else
                    {
                        if (m_UseMarkerNames)
                        {
                            samplePath = "";
                            for (int i = 0; i &lt; k_SampleNames.Count; i++)
                            {
                                samplePath += $"{k_SampleNames[i]}{ (i &lt; k_SampleNames.Count - 1 ?"/": "")}";
                            }
                            // SetSelection calls that take sample names as strings will find shortened scripting sample names
                            var mySctiprSamplePathDeepProfiling = $"{samplePath}/{GetUpdateSampleName(m_UpdateNameMatchType, true)}";
                            var myScriptSamplePath = $"{samplePath}/{GetUpdateSampleName(m_UpdateNameMatchType, false)}";<br /><br />                            if (cpuSampleSelectionController.SetSelection(m_Profiler.selectedFrameIndex,
                                k_MainThreadGroupName, k_MainThreadName, k_GCAllocSampleName, myScriptSamplePath) ||
                                cpuSampleSelectionController.SetSelection(m_Profiler.selectedFrameIndex,
                                    k_MainThreadGroupName, k_MainThreadName, k_GCAllocSampleName, mySctiprSamplePathDeepProfiling))
                            {
                                <a href="Debug.LogWarning.html">Debug.LogWarning</a>("MyScript allocates in its <a href="PlayerLoop.Update.html">Update</a> loop");
                            }
                            // MyScript did not have a GC.Alloc sample underneath it, but maybe a different <a href="PlayerLoop.Update.html">Update</a> sample allocated
                            // Search through all <a href="PlayerLoop.Update.html">Update</a>() samples
                            else if (cpuSampleSelectionController.SetSelection(m_Profiler.selectedFrameIndex,
                                k_MainThreadGroupName, k_MainThreadName, k_GCAllocSampleName, samplePath))
                            {
                                <a href="Debug.LogWarning.html">Debug.LogWarning</a>($"MyScript does not allocate but {cpuSampleSelectionController.selection.markerNamePath[k_SampleNames.Count]} allocates in its <a href="PlayerLoop.Update.html">Update</a> loop");
                            }
                            else
                            {
                                <a href="Debug.Log.html">Debug.Log</a>("No Script is allocating in its <a href="PlayerLoop.Update.html">Update</a> Loop");
                                FindAnyGCAllocSample(cpuSampleSelectionController);
                            }
                        }
                        else
                        {
                            List&lt;int&gt; markerIdPath = new List&lt;int&gt;(k_SampleNames.Count + 1);
                            List&lt;int&gt; deepProfilingmarkerIdPath = new List&lt;int&gt;(k_SampleNames.Count + 1);
                            int gcAllocMarkerId = <a href="Profiling.FrameDataView-invalidMarkerId.html">FrameDataView.invalidMarkerId</a>;
                            using (var frameData = ProfilerDriver.GetRawFrameDataView((int)m_Profiler.selectedFrameIndex, 0))
                            {
                                for (int i = 0; i &lt; k_SampleNames.Count; i++)
                                {
                                    markerIdPath.Add(frameData.GetMarkerId(k_SampleNames[i]));
                                }
                                deepProfilingmarkerIdPath.AddRange(markerIdPath);
                                // GetMarkerId needs the full length marker name to be able to identify this sample.
                                markerIdPath.Add(frameData.GetMarkerId(GetUpdateSampleName(UpdateNameMatchType.Full, false)));
                                deepProfilingmarkerIdPath.Add(frameData.GetMarkerId(GetUpdateSampleName(UpdateNameMatchType.Full, true)));<br /><br />                                gcAllocMarkerId = frameData.GetMarkerId(k_GCAllocSampleName);
                            }<br /><br />                            if (cpuSampleSelectionController.SetSelection(m_Profiler.selectedFrameIndex,
                                k_MainThreadGroupName, k_MainThreadName, gcAllocMarkerId, markerIdPath) ||
                                cpuSampleSelectionController.SetSelection(m_Profiler.selectedFrameIndex,
                                    k_MainThreadGroupName, k_MainThreadName, gcAllocMarkerId, deepProfilingmarkerIdPath))
                            {
                                <a href="Debug.LogWarning.html">Debug.LogWarning</a>("MyScript allocates in its <a href="PlayerLoop.Update.html">Update</a> loop");
                            }
                            else
                            {
                                // MyScript did not have a GC.Alloc sample underneath it, but maybe a different <a href="PlayerLoop.Update.html">Update</a> sample allocated
                                // Remove the MyScript sample id from the path and search through all <a href="PlayerLoop.Update.html">Update</a>() samples
                                markerIdPath.Remove(markerIdPath.Count - 1);
                                if (cpuSampleSelectionController.SetSelection(m_Profiler.selectedFrameIndex,
                                    k_MainThreadGroupName, k_MainThreadName,
                                    gcAllocMarkerId, markerIdPath))
                                {
                                    <a href="Debug.LogWarning.html">Debug.LogWarning</a>($"MyScript does not allocate but {cpuSampleSelectionController.selection.markerNamePath[k_SampleNames.Count]} allocates in its <a href="PlayerLoop.Update.html">Update</a> loop");
                                    return;
                                }
                                <a href="Debug.Log.html">Debug.Log</a>("No Script is allocating in its <a href="PlayerLoop.Update.html">Update</a> Loop");
                                FindAnyGCAllocSample(cpuSampleSelectionController);
                            }
                        }
                    }
                }
            }
        }
    }<br /><br />    void FindAnyGCAllocSample(<a href="Profiling.IProfilerFrameTimeViewSampleSelectionController.html">IProfilerFrameTimeViewSampleSelectionController</a> cpuSampleSelectionController)
    {
        using (var frameData = ProfilerDriver.GetRawFrameDataView((int)m_Profiler.selectedFrameIndex, 0))
        {
            var gcAllocMarkerId = frameData.GetMarkerId(k_GCAllocSampleName);
            for (int i = 0; i &lt; frameData.sampleCount; i++)
            {
                if (frameData.GetSampleMarkerId(i) == gcAllocMarkerId)
                {
                    var selection = new <a href="Profiling.ProfilerTimeSampleSelection.html">ProfilerTimeSampleSelection</a>(m_Profiler.selectedFrameIndex, k_MainThreadGroupName,
                        k_MainThreadName, frameData.threadId, i);
                    if (cpuSampleSelectionController.SetSelection(selection))
                    {
                        // do not use the selection object here. The CPU <a href="Profiling.Profiler.html">Profiler</a> Module created a new one.
                        // Instead Get the selection object from the <a href="Profiling.Profiler.html">Profiler</a>
                        <a href="Debug.LogWarning.html">Debug.LogWarning</a>($"MyScript does not allocate but {cpuSampleSelectionController.selection.markerNamePath[k_SampleNames.Count]} allocates in its <a href="PlayerLoop.Update.html">Update</a> loop");
                        return;
                    }
                }
            }
            <a href="Debug.Log.html">Debug.Log</a>("No Script is allocating anything");
        }
    }
}
</pre>
      </div>
              <div class="subsection">
                <p>
        This example shows all major variations of SetSelection and showcases their differences.
      </p>
              </div>
            </div>
            <div class="footer-wrapper">
              <div class="footer clear">
                <div class="copy">Copyright © 2022 Unity Technologies. Publication 2021.3</div>
                <div class="menu">
                  <a href="https://learn.unity.com/">教程</a>
                  <a href="https://answers.unity3d.com">社区答案</a>
                  <a href="https://support.unity3d.com/hc/en-us">知识库</a>
                  <a href="https://forum.unity3d.com">论坛</a>
                  <a href="https://unity3d.com/asset-store">Asset Store</a>
                </div>
              </div>
              <div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>