<!DOCTYPE html>
<html class="no-js" lang="zh-cn">
  <head>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-5V25JL6');
    </script>
    <link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet" />
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="twitter:card" content="summary" />
    <meta property="og:title" content="SearchService.ObjectSelector - Unity 脚本 API" />
    <title>SearchService.ObjectSelector - Unity 脚本 API</title>
    <meta name="description" content="Use this API to select objects. Engines for this type of search implement the IObjectSelectorEngine interface." />
    <meta property="og:description" content="Use this API to select objects. Engines for this type of search implement the IObjectSelectorEngine interface." />
    <meta name="author" content="Unity Technologies" />
    <link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico" />
    <link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png" />
    <meta name="msapplication-TileColor" content="#222c37" />
    <meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png" />
    <script type="text/javascript" src="" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836">
    </script>
    <script type="text/javascript">
        function OptanonWrapper() { }
    </script>
    <script>
      var docs_type = 'ScriptReference';
      var lang = 'cn';
      var page = 'SearchService.ObjectSelector';
      if(!page) page = 'index';
      var version = '2021.3';
      var docs_versions = [{version: '2022.1',version_string: '2022.1',supported: true},{version: '2021.3',version_string: '2021.3',supported: true},{version: '2021.2',version_string: '2021.2',supported: false},{version: '2021.1',version_string: '2021.1',supported: false},{version: '2020.3',version_string: '2020.3',supported: true},{version: '2020.2',version_string: '2020.2',supported: false},{version: '2020.1',version_string: '2020.1',supported: false},{version: '2019.4',version_string: '2019.4',supported: true},{version: '2019.3',version_string: '2019.3',supported: false},{version: '2019.2',version_string: '2019.2',supported: false},{version: '2019.1',version_string: '2019.1',supported: false},{version: '2018.4',version_string: '2018.4',supported: false},{version: '2018.3',version_string: '2018.3',supported: false},{version: '2018.2',version_string: '2018.2',supported: false},{version: '2018.1',version_string: '2018.1',supported: false},{version: '2017.4',version_string: '2017.4',supported: false},{version: '2017.3',version_string: '2017.3',supported: false},{version: '2017.2',version_string: '2017.2',supported: false},{version: '2017.1',version_string: '2017.1',supported: false},{version: '5.6',version_string: '560',supported: false},];</script>
    <script type="text/javascript" src="../StaticFiles/js/jquery.js">
    </script>
    <script type="text/javascript" src="../StaticFiles/js/core.js">
    </script>
    <script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js">
    </script>
    <script type="text/javascript" src="docdata/toc.js">
    </script>
    <script type="text/javascript" src="">
    </script>
    <script type="text/javascript" src="../StaticFiles/js/custom.js">
    </script>
    <link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css" />
    <link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css" />
    <link rel="canonical" href="https://docs.unity3d.com/cn/2021.3/ScriptReference/SearchService.ObjectSelector.html" />
    <link rel="alternate" href="https://docs.unity3d.com/en/2021.3/ScriptReference/SearchService.ObjectSelector.html" hreflang="en" />
    <link rel="alternate" href="https://docs.unity3d.com/cn/2021.3/ScriptReference/SearchService.ObjectSelector.html" hreflang="zh" />
    <link rel="alternate" href="https://docs.unity3d.com/ja/2021.3/ScriptReference/SearchService.ObjectSelector.html" hreflang="ja" />
    <link rel="alternate" href="https://docs.unity3d.com/es/2021.3/ScriptReference/SearchService.ObjectSelector.html" hreflang="es" />
    <link rel="alternate" href="https://docs.unity3d.com/kr/2021.3/ScriptReference/SearchService.ObjectSelector.html" hreflang="ko" />
    <link rel="alternate" href="https://docs.unity3d.com/ru/2021.3/ScriptReference/SearchService.ObjectSelector.html" hreflang="ru" />
    <link rel="alternate" href="https://docs.unity3d.com/2021.3/Documentation/ScriptReference/SearchService.ObjectSelector.html" hreflang="x-default" />
  </head>
  <body>
    <noscript>
      <iframe src="//www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden">
      </iframe>
    </noscript>
    <div class="header-wrapper">
      <div id="header" class="header">
        <div class="content">
          <div class="spacer">
            <div class="menu">
              <div id="nav-open" for="nav-input">
                <span>
                </span>
              </div>
              <div class="logo">
                <a href="./index.html">
                </a>
              </div>
              <div class="search-form">
                <form action="30_search.html" method="get" class="apisearch">
                  <input type="text" name="q" placeholder="搜索脚本..." autosave="Unity Reference" results="5" class="sbox field" id="q">
                  </input>
                  <input type="submit" class="submit">
                  </input>
                </form>
              </div>
              <ul class="menu-items">
                <li class="menu-item">
                  <a href="../Manual/index.html" class="">手册</a>
                </li>
                <li class="menu-item">
                  <a href="../ScriptReference/index.html" class="selected">脚本 API</a>
                </li>
              </ul>
            </div>
          </div>
          <div class="more">
            <div class="filler">
            </div>
            <ul>
              <li>
                <a href="https://unity3d.com/">
                unity3d.com
              </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="toolbar">
        <div class="content">
          <div class="version-switcher">
            <div class="current toggle" data-target=".version-list">
              <div class="version-number">
                <div class="d-inline-block">
          Version:
          <b>2021.3</b></div>
                <div class="d-inline-block arrow">
                </div>
              </div>
            </div>
            <div class="version-list" style="display:none;">
              <ul class="versions">
                <li class="supported">
                  <a class="docs_version_url_2022.1" href="/cn/2022.1/ScriptReference/SearchService.ObjectSelector.html">2022.1</a>
                </li>
                <li class="supported">
                  <a class="docs_version_url_2021.3" href="/cn/2021.3/ScriptReference/SearchService.ObjectSelector.html">2021.3</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2021.2" href="/cn/2021.2/ScriptReference/SearchService.ObjectSelector.html">2021.2</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2021.1" href="/cn/2021.1/ScriptReference/SearchService.ObjectSelector.html">2021.1</a>
                </li>
                <li class="supported">
                  <a class="docs_version_url_2020.3" href="/cn/2020.3/ScriptReference/SearchService.ObjectSelector.html">2020.3</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2020.2" href="/cn/2020.2/ScriptReference/SearchService.ObjectSelector.html">2020.2</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2020.1" href="/cn/2020.1/ScriptReference/SearchService.ObjectSelector.html">2020.1</a>
                </li>
                <li class="supported">
                  <a class="docs_version_url_2019.4" href="/cn/2019.4/ScriptReference/SearchService.ObjectSelector.html">2019.4</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2019.3" href="/cn/2019.3/ScriptReference/SearchService.ObjectSelector.html">2019.3</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2019.2" href="/cn/2019.2/ScriptReference/SearchService.ObjectSelector.html">2019.2</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2019.1" href="/cn/2019.1/ScriptReference/SearchService.ObjectSelector.html">2019.1</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2018.4" href="/cn/2018.4/ScriptReference/SearchService.ObjectSelector.html">2018.4</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2018.3" href="/cn/2018.3/ScriptReference/SearchService.ObjectSelector.html">2018.3</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2018.2" href="/cn/2018.2/ScriptReference/SearchService.ObjectSelector.html">2018.2</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2018.1" href="/cn/2018.1/ScriptReference/SearchService.ObjectSelector.html">2018.1</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2017.4" href="/cn/2017.4/ScriptReference/SearchService.ObjectSelector.html">2017.4</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2017.3" href="/cn/2017.3/ScriptReference/SearchService.ObjectSelector.html">2017.3</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2017.2" href="/cn/2017.2/ScriptReference/SearchService.ObjectSelector.html">2017.2</a>
                </li>
                <li class="">
                  <a class="docs_version_url_2017.1" href="/cn/2017.1/ScriptReference/SearchService.ObjectSelector.html">2017.1</a>
                </li>
                <li class="">
                  <a class="docs_version_url_560" href="/cn/560/ScriptReference/SearchService.ObjectSelector.html">5.6</a>
                </li>
                <div class="versionsWithThisPage" style="display:none;">
                  <li>
                    <p>包含此页的版本：</p>
                  </li>
                </div>
                <div class="versionsWithoutThisPage" style="display:none;">
                  <li>
                    <p>不含此页的版本：</p>
                  </li>
                </div>
              </ul>
              <ul class="description">
                <li>
                  <div class="supported-box">
                  </div>受支持</li>
                <li>
                  <div class="legacy-box">
                  </div>旧版</li>
              </ul>
            </div>
          </div>
          <ul class="nav-menu-items">
            <li class="menu-item">
              <a href="../Manual/index.html" class="">手册</a>
            </li>
            <li class="menu-item">
              <a href="../ScriptReference/index.html" class="selected">脚本 API</a>
            </li>
          </ul>
          <div class="lang-switcher">
            <div class="current toggle" data-target=".lang-list">
              <div class="lbl">语言:
        <span class="b">中文</span></div>
              <div class="arrow">
              </div>
            </div>
            <div class="lang-list" style="display:none;">
              <ul>
                <li>
                  <a data-lang="en" href="/2021.3/Documentation/ScriptReference/SearchService.ObjectSelector.html">English</a>
                </li>
                <li>
                  <a data-lang="cn" href="/cn/2021.3/ScriptReference/SearchService.ObjectSelector.html">中文</a>
                </li>
                <li>
                  <a data-lang="ja" href="/ja/2021.3/ScriptReference/SearchService.ObjectSelector.html">日本語</a>
                </li>
                <li>
                  <a data-lang="es" href="/es/2021.3/ScriptReference/SearchService.ObjectSelector.html">Español</a>
                </li>
                <li>
                  <a data-lang="kr" href="/kr/2021.3/ScriptReference/SearchService.ObjectSelector.html">한국어</a>
                </li>
                <li>
                  <a data-lang="ru" href="/ru/2021.3/ScriptReference/SearchService.ObjectSelector.html">Русский</a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="master-wrapper" class="master-wrapper clear">
      <div id="sidebar" class="sidebar hidden">
        <div class="sidebar-wrap">
          <div class="content">
            <div class="sidebar-menu">
              <div class="toc">
                <h2>脚本 API</h2>
                <div class="version-switcher">
                  <div class="current toggle" data-target=".version-list">
                    <div class="version-number">
                      <div class="d-inline-block">
          Version:
          <b>2021.3</b></div>
                      <div class="d-inline-block arrow">
                      </div>
                    </div>
                  </div>
                  <div class="version-list" style="display:none;">
                    <ul class="versions">
                      <li class="supported">
                        <a class="docs_version_url_2022.1" href="/cn/2022.1/ScriptReference/SearchService.ObjectSelector.html">2022.1</a>
                      </li>
                      <li class="supported">
                        <a class="docs_version_url_2021.3" href="/cn/2021.3/ScriptReference/SearchService.ObjectSelector.html">2021.3</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2021.2" href="/cn/2021.2/ScriptReference/SearchService.ObjectSelector.html">2021.2</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2021.1" href="/cn/2021.1/ScriptReference/SearchService.ObjectSelector.html">2021.1</a>
                      </li>
                      <li class="supported">
                        <a class="docs_version_url_2020.3" href="/cn/2020.3/ScriptReference/SearchService.ObjectSelector.html">2020.3</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2020.2" href="/cn/2020.2/ScriptReference/SearchService.ObjectSelector.html">2020.2</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2020.1" href="/cn/2020.1/ScriptReference/SearchService.ObjectSelector.html">2020.1</a>
                      </li>
                      <li class="supported">
                        <a class="docs_version_url_2019.4" href="/cn/2019.4/ScriptReference/SearchService.ObjectSelector.html">2019.4</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2019.3" href="/cn/2019.3/ScriptReference/SearchService.ObjectSelector.html">2019.3</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2019.2" href="/cn/2019.2/ScriptReference/SearchService.ObjectSelector.html">2019.2</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2019.1" href="/cn/2019.1/ScriptReference/SearchService.ObjectSelector.html">2019.1</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2018.4" href="/cn/2018.4/ScriptReference/SearchService.ObjectSelector.html">2018.4</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2018.3" href="/cn/2018.3/ScriptReference/SearchService.ObjectSelector.html">2018.3</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2018.2" href="/cn/2018.2/ScriptReference/SearchService.ObjectSelector.html">2018.2</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2018.1" href="/cn/2018.1/ScriptReference/SearchService.ObjectSelector.html">2018.1</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2017.4" href="/cn/2017.4/ScriptReference/SearchService.ObjectSelector.html">2017.4</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2017.3" href="/cn/2017.3/ScriptReference/SearchService.ObjectSelector.html">2017.3</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2017.2" href="/cn/2017.2/ScriptReference/SearchService.ObjectSelector.html">2017.2</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_2017.1" href="/cn/2017.1/ScriptReference/SearchService.ObjectSelector.html">2017.1</a>
                      </li>
                      <li class="">
                        <a class="docs_version_url_560" href="/cn/560/ScriptReference/SearchService.ObjectSelector.html">5.6</a>
                      </li>
                      <div class="versionsWithThisPage" style="display:none;">
                        <li>
                          <p>包含此页的版本：</p>
                        </li>
                      </div>
                      <div class="versionsWithoutThisPage" style="display:none;">
                        <li>
                          <p>不含此页的版本：</p>
                        </li>
                      </div>
                    </ul>
                    <ul class="description">
                      <li>
                        <div class="supported-box">
                        </div>受支持</li>
                      <li>
                        <div class="legacy-box">
                        </div>旧版</li>
                    </ul>
                  </div>
                </div>
                <div class="clear">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="content-wrap" class="content-wrap opened-sidebar">
        <div class="content-block">
          <div class="content">
            <div class="section">
              <div class="mb20 clear" id="">
                <div class="message message-error mb20">
                  <b>Method group is Obsolete</b>
                  <br />
                </div>
                <h1 class="heading inherit">ObjectSelector</h1>
                <div class="clear">
                </div>
                <p class="cl mb0 left mr10">class in UnityEditor.SearchService</p>
                <div class="clear">
                </div>
                <a href="" class="switch-link gray-btn sbtn left hide">切换到手册</a>
                <div class="clear">
                </div>
              </div>
              <div class="subsection">
                <div class="signature">
                  <div class="signature-CS sig-block">
                    <span style="color:red;">Obsolete </span>
                  </div>
                </div>
              </div>
              <div class="subsection">
                <h2>描述</h2>
                <p>Use this API to select objects. Engines for this type of search implement the <a href="SearchService.IObjectSelectorEngine.html">IObjectSelectorEngine</a> interface.</p>
              </div>
              <div class="subsection">
                <p>
        When a custom ObjectSelector engine is active, the object selector calls registered ObjectSelector engines. When the default ObjectSelector engine is active, the window uses the default object selector, and the internal searches use the active Scene and Project search engines.<br /><br />The following example creates an ObjectSelector engine:
      </p>
              </div>
              <div class="subsection">
        <pre class="codeExampleCS">
using <a href="Rendering.VirtualTexturing.System.html">System</a>;
using System.Collections.Generic;
using System.Linq;
using <a href="UnityEditor.html">UnityEditor</a>;
using UnityEditor.SearchService;
using UnityEngine;
using Object = UnityEngine.Object;
using ObjectSelector = UnityEditor.SearchService.ObjectSelector;<br /><br />[ObjectSelectorEngine]
class TestObjectSelectorSearchEngine : <a href="SearchService.IObjectSelectorEngine.html">IObjectSelectorEngine</a>
{
    public string name =&gt; "My Custom Engine";<br /><br />    public void BeginSession(<a href="SearchService.ISearchContext.html">ISearchContext</a> context)
    {
    }<br /><br />    public void EndSession(<a href="SearchService.ISearchContext.html">ISearchContext</a> context)
    {
    }<br /><br />    public void BeginSearch(<a href="SearchService.ISearchContext.html">ISearchContext</a> context, string query)
    {
    }<br /><br />    public void EndSearch(<a href="SearchService.ISearchContext.html">ISearchContext</a> context)
    {
    }<br /><br />    public bool SelectObject(<a href="SearchService.ISearchContext.html">ISearchContext</a> context, Action&lt;Object, bool&gt; onObjectSelectorClosed, Action&lt;Object&gt; onObjectSelectedUpdated)
    {
        ObjectSelectorWindow.Show((<a href="SearchService.ObjectSelectorSearchContext.html">ObjectSelectorSearchContext</a>)context, onObjectSelectedUpdated, onObjectSelectorClosed);
        return true;
    }<br /><br />    public void SetSearchFilter(<a href="SearchService.ISearchContext.html">ISearchContext</a> context, string searchFilter)
    {
        ObjectSelectorWindow.instance.searchText = searchFilter;
    }
}
</pre>
      </div>
              <div class="subsection">
                <p>
        The following example creates an object selector window that displays returned items as a list of names and paths:
      </p>
              </div>
              <div class="subsection">
        <pre class="codeExampleCS">
using <a href="Rendering.VirtualTexturing.System.html">System</a>;
using System.Collections.Generic;
using System.Linq;
using <a href="UnityEditor.html">UnityEditor</a>;
using UnityEditor.SearchService;
using UnityEditor.UIElements;
using UnityEngine.UIElements;
using Object = UnityEngine.Object;
using ObjectSelector = UnityEditor.SearchService.ObjectSelector;<br /><br />public class ObjectSelectorWindow : <a href="EditorWindow.html">EditorWindow</a>
{
    public class ItemInfo
    {
        public int instanceId;
        public string label;
    }<br /><br />    static <a href="SearchService.ObjectSelectorSearchContext.html">ObjectSelectorSearchContext</a> s_Context;
    static Action&lt;Object&gt; s_OnSelectionChanged;
    static Action&lt;Object, bool&gt; s_OnSelectorClosed;
    static Func&lt;Object, bool&gt; s_FilterConstraint;
    public static ObjectSelectorWindow instance { get; private set; }<br /><br />    List&lt;ItemInfo&gt; m_FilteredItems;
    ToolbarSearchField m_Searchbox;
    ListView m_ListView;
    string m_SearchText;
    ItemInfo m_CurrentItem;
    bool m_Canceled = true;<br /><br />    public bool initialized { get; private set; } = false;<br /><br />    public string searchText
    {
        get =&gt; m_SearchText;
        set
        {
            m_SearchText = value;
            FilterItems();
        }
    }<br /><br />    public List&lt;ItemInfo&gt; allItems { get; private set; }<br /><br />    public static void Show(<a href="SearchService.ObjectSelectorSearchContext.html">ObjectSelectorSearchContext</a> context, Action&lt;Object&gt; onSelectionChanged, Action&lt;Object, bool&gt; onSelectorClosed, Func&lt;Object, bool&gt; pickerConstraint = null)
    {
        s_Context = context;
        s_OnSelectionChanged = onSelectionChanged;
        s_OnSelectorClosed = onSelectorClosed;
        s_FilterConstraint = pickerConstraint ?? (o =&gt; true);<br /><br />        // Create a window with CreateInstance, and show it with ShowAuxWindow.
        var window = CreateInstance&lt;ObjectSelectorWindow&gt;();
        instance = window;
        window.ShowAuxWindow();
    }<br /><br />    void Init()
    {
        m_SearchText = "";
        allItems = new List&lt;ItemInfo&gt;();
        m_FilteredItems = new List&lt;ItemInfo&gt;();<br /><br />        if ((s_Context.visibleObjects &amp;amp; <a href="SearchService.VisibleObjects.Assets.html">VisibleObjects.Assets</a>) == <a href="SearchService.VisibleObjects.Assets.html">VisibleObjects.Assets</a>)
            allItems.AddRange(FetchAllAssets());
        if ((s_Context.visibleObjects &amp;amp; <a href="SearchService.VisibleObjects.Scene.html">VisibleObjects.Scene</a>) == <a href="SearchService.VisibleObjects.Scene.html">VisibleObjects.Scene</a>)
            allItems.AddRange(FetchAllGameObjects(s_Context));<br /><br />        allItems.Sort((item, other) =&gt; item.label.CompareTo(other.label));
        m_FilteredItems.AddRange(allItems);
    }<br /><br />    void OnEnable()
    {
        Init();<br /><br />        m_Searchbox = new ToolbarSearchField();
        m_Searchbox.RegisterValueChangedCallback(SearchFilterChanged);
        m_Searchbox.style.flexGrow = 1;
        m_Searchbox.style.maxHeight = 16;
        m_Searchbox.style.width = Length.Percent(100f);
        m_Searchbox.style.marginRight = 4;
        rootVisualElement.Add(m_Searchbox);<br /><br />        m_ListView = new ListView(m_FilteredItems, 16, MakeItem, BindItem);
        m_ListView.onSelectionChange += ItemSelectionChanged;
        m_ListView.onItemsChosen += ItemsChosen;
        m_ListView.style.flexGrow = 1;
        rootVisualElement.Add(m_ListView);<br /><br />        // Initialize selection
        if (s_Context.currentObject != null)
        {
            var currentSelectedId = s_Context.currentObject.GetInstanceID();
            var selectedIndex = m_FilteredItems.FindIndex(item =&gt; item.instanceId == currentSelectedId);
            if (selectedIndex &gt;= 0)
                m_ListView.selectedIndex = selectedIndex;
        }<br /><br />        FinishInit();
    }<br /><br />    void FinishInit()
    {
        <a href="EditorApplication-delayCall.html">EditorApplication.delayCall</a> += () =&gt;
        {
            m_ListView.Focus();
            initialized = true;
        };
    }<br /><br />    void OnDisable()
    {
        s_OnSelectorClosed?.Invoke(GetCurrentObject(), m_Canceled);
        instance = null;
    }<br /><br />    public void SetSearchFilter(string query)
    {
        m_Searchbox.value = query;
    }<br /><br />    void SearchFilterChanged(ChangeEvent&lt;string&gt; evt)
    {
        searchText = evt.newValue;
    }<br /><br />    void FilterItems()
    {
        m_FilteredItems.Clear();
        m_FilteredItems.AddRange(allItems.Where(item =&gt; string.IsNullOrEmpty(searchText) || item.label.IndexOf(searchText, StringComparison.InvariantCultureIgnoreCase) &gt;= 0));<br /><br />        m_ListView.Refresh();
    }<br /><br />    void BindItem(VisualElement listItem, int index)
    {
        if (index &lt; 0 || index &gt;= m_FilteredItems.Count)
            return;<br /><br />        var label = listItem as Label;
        if (label == null)
            return;
        label.text = m_FilteredItems[index].label;
    }<br /><br />    static VisualElement MakeItem()
    {
        return new Label();
    }<br /><br />    void ItemSelectionChanged(IEnumerable&lt;object&gt; selectedItems)
    {
        m_CurrentItem = selectedItems.FirstOrDefault() as ItemInfo;
        s_OnSelectionChanged?.Invoke(GetCurrentObject());
    }<br /><br />    void ItemsChosen(IEnumerable&lt;object&gt; selectedItems)
    {
        m_CurrentItem = selectedItems.FirstOrDefault() as ItemInfo;
        m_Canceled = false;
        Close();
    }<br /><br />    static IEnumerable&lt;ItemInfo&gt; FetchAllAssets()
    {
        var allPaths = AssetDatabase.GetAllAssetPaths();
        if (allPaths == null)
            yield break;<br /><br />        var requiredTypes = s_Context.requiredTypeNames != null ? s_Context.requiredTypeNames.ToList() : new List&lt;string&gt;();
        foreach (var path in allPaths)
        {
            var type = <a href="AssetDatabase.GetMainAssetTypeAtPath.html">AssetDatabase.GetMainAssetTypeAtPath</a>(path);
            var typeName = type.FullName ?? "";
            if (requiredTypes.Any(requiredType =&gt; typeName.Contains(requiredType)))
            {
                var asset = <a href="AssetDatabase.LoadMainAssetAtPath.html">AssetDatabase.LoadMainAssetAtPath</a>(path);
                var matchFilterConstraint = s_FilterConstraint?.Invoke(asset);
                if (matchFilterConstraint.HasValue &amp;amp;&amp;amp; !matchFilterConstraint.Value)
                    continue;
                var instanceId = asset?.GetInstanceID() ?? 0;
                yield return new ItemInfo { instanceId = instanceId, label = path };
            }
        }
    }<br /><br />    static IEnumerable&lt;ItemInfo&gt; FetchAllGameObjects(<a href="SearchService.ObjectSelectorSearchContext.html">ObjectSelectorSearchContext</a> context)
    {
        var property = new HierarchyProperty(HierarchyType.GameObjects, false);<br /><br />        var requiredTypes = s_Context.requiredTypeNames != null ? s_Context.requiredTypeNames.ToList() : new List&lt;string&gt;();
        while (property.Next(null))
        {
            var objectReferenced = property.pptrValue;
            if (objectReferenced == null)
                continue;
            var matchFilterConstraint = s_FilterConstraint?.Invoke(objectReferenced);
            if (matchFilterConstraint.HasValue &amp;amp;&amp;amp; !matchFilterConstraint.Value)
                continue;
            var typeName = objectReferenced.GetType().FullName ?? "";
            if (requiredTypes.Any(requiredType =&gt; typeName.Contains(requiredType)))
                yield return new ItemInfo { instanceId = property.instanceID, label = property.name };
        }
    }<br /><br />    Object GetCurrentObject()
    {
        if (m_CurrentItem == null)
            return null;
        return <a href="EditorUtility.InstanceIDToObject.html">EditorUtility.InstanceIDToObject</a>(m_CurrentItem.instanceId);
    }
}
</pre>
      </div>
              <div class="subsection">
                <p>
        See Also: <a href="SearchService.ObjectSelectorEngineAttribute.html">ObjectSelectorEngineAttribute</a>, <a href="SearchService.IObjectSelectorEngine.html">IObjectSelectorEngine</a>.
      </p>
              </div>
            </div>
            <div class="footer-wrapper">
              <div class="footer clear">
                <div class="copy">Copyright © 2022 Unity Technologies. Publication 2021.3</div>
                <div class="menu">
                  <a href="https://learn.unity.com/">教程</a>
                  <a href="https://answers.unity3d.com">社区答案</a>
                  <a href="https://support.unity3d.com/hc/en-us">知识库</a>
                  <a href="https://forum.unity3d.com">论坛</a>
                  <a href="https://unity3d.com/asset-store">Asset Store</a>
                </div>
              </div>
              <div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>