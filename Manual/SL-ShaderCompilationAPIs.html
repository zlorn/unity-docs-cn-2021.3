<!DOCTYPE html><html class="no-js" lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-5V25JL6');
    </script><link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="twitter:card" content="summary">
<meta property="og:title" content="Targeting graphics APIs and platforms in HLSL - Unity 手册">
<title>Targeting graphics APIs and platforms in HLSL - Unity 手册</title>
<meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg">
<meta name="description" content="Some #pragma directives take parameters that allow you to target specific graphics APIs and platforms. This page contains information on using those directives, and provides a list of valid parameter values.">
<meta property="og:description" content="Some #pragma directives take parameters that allow you to target specific graphics APIs and platforms. This page contains information on using those directives, and provides a list of valid parameter values.">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836"></script><script type="text/javascript">
        function OptanonWrapper() { }
    </script><script>
      var docs_type = 'Manual';
      var lang = 'cn';
      var page = 'SL-ShaderCompilationAPIs';
      if(!page) page = 'index';
      var version = '2021.3';
      var docs_versions = [{version: '2022.1',version_string: '2022.1',supported: true},{version: '2021.3',version_string: '2021.3',supported: true},{version: '2021.2',version_string: '2021.2',supported: false},{version: '2021.1',version_string: '2021.1',supported: false},{version: '2020.3',version_string: '2020.3',supported: true},{version: '2020.2',version_string: '2020.2',supported: false},{version: '2020.1',version_string: '2020.1',supported: false},{version: '2019.4',version_string: '2019.4',supported: true},{version: '2019.3',version_string: '2019.3',supported: false},{version: '2019.2',version_string: '2019.2',supported: false},{version: '2019.1',version_string: '2019.1',supported: false},{version: '2018.4',version_string: '2018.4',supported: false},{version: '2018.3',version_string: '2018.3',supported: false},{version: '2018.2',version_string: '2018.2',supported: false},{version: '2018.1',version_string: '2018.1',supported: false},{version: '2017.4',version_string: '2017.4',supported: false},{version: '2017.3',version_string: '2017.3',supported: false},{version: '2017.2',version_string: '2017.2',supported: false},{version: '2017.1',version_string: '2017.1',supported: false},{version: '5.6',version_string: '560',supported: false},];</script><script type="text/javascript" src="../StaticFiles/js/jquery.js"></script><script type="text/javascript" src="../StaticFiles/js/core.js"></script><script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js"></script><script type="text/javascript" src="docdata/toc.js"></script><script type="text/javascript" src=""></script><script type="text/javascript" src="../StaticFiles/js/custom.js"></script><link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css">
<link rel="canonical" href="https://docs.unity3d.com/cn/2021.3/Manual/SL-ShaderCompilationAPIs.html">
<link rel="alternate" href="https://docs.unity3d.com/en/2021.3/Manual/SL-ShaderCompilationAPIs.html" hreflang="en">
<link rel="alternate" href="https://docs.unity3d.com/cn/2021.3/Manual/SL-ShaderCompilationAPIs.html" hreflang="zh">
<link rel="alternate" href="https://docs.unity3d.com/ja/2021.3/Manual/SL-ShaderCompilationAPIs.html" hreflang="ja">
<link rel="alternate" href="https://docs.unity3d.com/es/2021.3/Manual/SL-ShaderCompilationAPIs.html" hreflang="es">
<link rel="alternate" href="https://docs.unity3d.com/kr/2021.3/Manual/SL-ShaderCompilationAPIs.html" hreflang="ko">
<link rel="alternate" href="https://docs.unity3d.com/ru/2021.3/Manual/SL-ShaderCompilationAPIs.html" hreflang="ru">
<link rel="alternate" href="https://docs.unity3d.com/2021.3/Documentation/Manual/SL-ShaderCompilationAPIs.html" hreflang="x-default">
</head>
<body>
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="./index.html"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="搜索手册..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul class="menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">
                unity3d.com
              </a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2021.3</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;">
<ul class="versions">
<li class="supported"><a class="docs_version_url_2022.1" href="/cn/2022.1/Manual/SL-ShaderCompilationAPIs.html">2022.1</a></li>
<li class="supported"><a class="docs_version_url_2021.3" href="/cn/2021.3/Manual/SL-ShaderCompilationAPIs.html">2021.3</a></li>
<li class=""><a class="docs_version_url_2021.2" href="/cn/2021.2/Manual/SL-ShaderCompilationAPIs.html">2021.2</a></li>
<li class=""><a class="docs_version_url_2021.1" href="/cn/2021.1/Manual/SL-ShaderCompilationAPIs.html">2021.1</a></li>
<li class="supported"><a class="docs_version_url_2020.3" href="/cn/2020.3/Manual/SL-ShaderCompilationAPIs.html">2020.3</a></li>
<li class=""><a class="docs_version_url_2020.2" href="/cn/2020.2/Manual/SL-ShaderCompilationAPIs.html">2020.2</a></li>
<li class=""><a class="docs_version_url_2020.1" href="/cn/2020.1/Manual/SL-ShaderCompilationAPIs.html">2020.1</a></li>
<li class="supported"><a class="docs_version_url_2019.4" href="/cn/2019.4/Manual/SL-ShaderCompilationAPIs.html">2019.4</a></li>
<li class=""><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/SL-ShaderCompilationAPIs.html">2019.3</a></li>
<li class=""><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/SL-ShaderCompilationAPIs.html">2019.2</a></li>
<li class=""><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/SL-ShaderCompilationAPIs.html">2019.1</a></li>
<li class=""><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/SL-ShaderCompilationAPIs.html">2018.4</a></li>
<li class=""><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/SL-ShaderCompilationAPIs.html">2018.3</a></li>
<li class=""><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/SL-ShaderCompilationAPIs.html">2018.2</a></li>
<li class=""><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/SL-ShaderCompilationAPIs.html">2018.1</a></li>
<li class=""><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/SL-ShaderCompilationAPIs.html">2017.4</a></li>
<li class=""><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/SL-ShaderCompilationAPIs.html">2017.3</a></li>
<li class=""><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/SL-ShaderCompilationAPIs.html">2017.2</a></li>
<li class=""><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/SL-ShaderCompilationAPIs.html">2017.1</a></li>
<li class=""><a class="docs_version_url_560" href="/cn/560/Manual/SL-ShaderCompilationAPIs.html">5.6</a></li>
<div class="versionsWithThisPage" style="display:none;"><li><p>包含此页的版本：</p></li></div>
<div class="versionsWithoutThisPage" style="display:none;"><li><p>不含此页的版本：</p></li></div>
</ul>
<ul class="description">
<li>
<div class="supported-box"></div>受支持</li>
<li>
<div class="legacy-box"></div>旧版</li>
</ul>
</div>
</div>
<ul class="nav-menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">语言:
        <span class="b">中文</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a data-lang="en" href="/2021.3/Documentation/Manual/SL-ShaderCompilationAPIs.html">English</a></li>
<li><a data-lang="cn" href="/cn/2021.3/Manual/SL-ShaderCompilationAPIs.html">中文</a></li>
<li><a data-lang="ja" href="/ja/2021.3/Manual/SL-ShaderCompilationAPIs.html">日本語</a></li>
<li><a data-lang="es" href="/es/2021.3/Manual/SL-ShaderCompilationAPIs.html">Español</a></li>
<li><a data-lang="kr" href="/kr/2021.3/Manual/SL-ShaderCompilationAPIs.html">한국어</a></li>
<li><a data-lang="ru" href="/ru/2021.3/Manual/SL-ShaderCompilationAPIs.html">Русский</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar hidden"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc">
<h2>手册</h2>
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2021.3</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;">
<ul class="versions">
<li class="supported"><a class="docs_version_url_2022.1" href="/cn/2022.1/Manual/SL-ShaderCompilationAPIs.html">2022.1</a></li>
<li class="supported"><a class="docs_version_url_2021.3" href="/cn/2021.3/Manual/SL-ShaderCompilationAPIs.html">2021.3</a></li>
<li class=""><a class="docs_version_url_2021.2" href="/cn/2021.2/Manual/SL-ShaderCompilationAPIs.html">2021.2</a></li>
<li class=""><a class="docs_version_url_2021.1" href="/cn/2021.1/Manual/SL-ShaderCompilationAPIs.html">2021.1</a></li>
<li class="supported"><a class="docs_version_url_2020.3" href="/cn/2020.3/Manual/SL-ShaderCompilationAPIs.html">2020.3</a></li>
<li class=""><a class="docs_version_url_2020.2" href="/cn/2020.2/Manual/SL-ShaderCompilationAPIs.html">2020.2</a></li>
<li class=""><a class="docs_version_url_2020.1" href="/cn/2020.1/Manual/SL-ShaderCompilationAPIs.html">2020.1</a></li>
<li class="supported"><a class="docs_version_url_2019.4" href="/cn/2019.4/Manual/SL-ShaderCompilationAPIs.html">2019.4</a></li>
<li class=""><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/SL-ShaderCompilationAPIs.html">2019.3</a></li>
<li class=""><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/SL-ShaderCompilationAPIs.html">2019.2</a></li>
<li class=""><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/SL-ShaderCompilationAPIs.html">2019.1</a></li>
<li class=""><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/SL-ShaderCompilationAPIs.html">2018.4</a></li>
<li class=""><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/SL-ShaderCompilationAPIs.html">2018.3</a></li>
<li class=""><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/SL-ShaderCompilationAPIs.html">2018.2</a></li>
<li class=""><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/SL-ShaderCompilationAPIs.html">2018.1</a></li>
<li class=""><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/SL-ShaderCompilationAPIs.html">2017.4</a></li>
<li class=""><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/SL-ShaderCompilationAPIs.html">2017.3</a></li>
<li class=""><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/SL-ShaderCompilationAPIs.html">2017.2</a></li>
<li class=""><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/SL-ShaderCompilationAPIs.html">2017.1</a></li>
<li class=""><a class="docs_version_url_560" href="/cn/560/Manual/SL-ShaderCompilationAPIs.html">5.6</a></li>
<div class="versionsWithThisPage" style="display:none;"><li><p>包含此页的版本：</p></li></div>
<div class="versionsWithoutThisPage" style="display:none;"><li><p>不含此页的版本：</p></li></div>
</ul>
<ul class="description">
<li>
<div class="supported-box"></div>受支持</li>
<li>
<div class="legacy-box"></div>旧版</li>
</ul>
</div>
</div>
<div class="clear"></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap opened-sidebar"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual 2021.3 (LTS)</a></li>
<li><a href="Graphics.html">图形</a></li>
<li><a href="Shaders.html">着色器</a></li>
<li><a href="shader-writing.html">编写着色器</a></li>
<li><a href="SL-ShaderPrograms.html">Unity 中的 HLSL</a></li>
<li><a href="shader-preprocessor-directives.html">Preprocessor directives in HLSL</a></li>
<li>Targeting graphics APIs and platforms in HLSL</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="SL-ShaderCompileTargets.html"></a></span><div class="tip">Targeting shader models and GPU features in HLSL</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="SL-MultipleProgramVariants.html"></a></span><div class="tip">Declaring and using shader keywords in HLSL</div>
</div>
</div></div>
<h1>Targeting graphics APIs and platforms in HLSL</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>Some <a href="SL-PragmaDirectives.html"><code>#pragma</code> directives</a> take parameters that allow you to target specific graphics APIs and platforms. This page contains information on using those directives, and provides a list of valid parameter values.</p>

<h2>包含或排除图形 API</h2>

<p>By default, Unity compiles all shader programs for each graphics API in the list for the current build target. Sometimes, you might want to compile certain shader programs only for certain graphics APIs; for example, if you use features that are not supported on all platforms.</p>

<p>To compile a shader program only for given APIs, use the <code>#pragma only_renderers</code> directive. You can pass multiple values, space delimited.</p>

<p>This example demonstrates how to compile shaders only for Metal and Vulkan:</p>

<pre><code>#pragma only_renderers metal vulkan
</code></pre>

<p>To exclude shader code from compilation by given compilers, use the <code>#pragma exclude_renderers</code> directive. You can pass multiple values, space delimited.</p>

<p>This example demonstrates how to exclude a shader from compilation for Metal and Vulkan:</p>

<pre><code>#pragma exclude_renderers metal vulkan
</code></pre>

<h2>Generating shader variants for graphics tiers for a given graphics API</h2>

<p>In the Built-in Render Pipeline, Unity automatically generates <a href="shader-variants.html">shader variants</a> that correspond to <a href="graphics-tiers.html">graphics tiers</a> under certain conditions. You can also force Unity to generate these variants, if required.</p>

<p>To do this, use the <code>#pragma hardware_tier_variants</code> preprocessor directive and specify the graphics APIs for which you want to generate tier shader variants.</p>

<p>For example, this instructs Unity to compile tier shader variants for Metal:</p>

<pre><code>#pragma hardware_tier_variants metal
</code></pre>

<h2>List of valid parameter values</h2>

<p>Supported values are:</p>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;"><strong>值</strong></th>
	<th style="text-align:left;"><strong>描述</strong></th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;"><code>d3d11</code></td>
	<td style="text-align:left;">DirectX 11 feature level 10 and above, DirectX 12</td>
</tr>
<tr>
	<td style="text-align:left;"><code>gles</code></td>
	<td style="text-align:left;">OpenGL ES 2.0, WebGL 1.0</td>
</tr>
<tr>
	<td style="text-align:left;"><code>gles3</code></td>
	<td style="text-align:left;">OpenGL ES 3.x, WebGL 2.0</td>
</tr>
<tr>
	<td style="text-align:left;"><code>ps4</code></td>
	<td style="text-align:left;">PlayStation 4</td>
</tr>
<tr>
	<td style="text-align:left;"><code>xboxone</code></td>
	<td style="text-align:left;">Xbox One and GameCore, DirectX 11 and DirectX 12</td>
</tr>
<tr>
	<td style="text-align:left;"><code>metal</code></td>
	<td style="text-align:left;">iOS/Mac Metal</td>
</tr>
<tr>
	<td style="text-align:left;"><code>glcore</code></td>
	<td style="text-align:left;">OpenGL 3.x, OpenGL 4.x</td>
</tr>
<tr>
	<td style="text-align:left;"><code>vulkan</code></td>
	<td style="text-align:left;">Vulkan</td>
</tr>
<tr>
	<td style="text-align:left;"><code>switch</code></td>
	<td style="text-align:left;">Nintendo Switch</td>
</tr>
<tr>
	<td style="text-align:left;"><code>ps5</code></td>
	<td style="text-align:left;">PlayStation 5</td>
</tr>
</tbody>
</table>

<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="SL-ShaderCompileTargets.html"></a></span><div class="tip">Targeting shader models and GPU features in HLSL</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="SL-MultipleProgramVariants.html"></a></span><div class="tip">Declaring and using shader keywords in HLSL</div>
</div>
</div>
</div>
<div class="footer-wrapper">
<div class="footer clear">
<div class="copy">Copyright © 2022 Unity Technologies. Publication 2021.3</div>
<div class="menu">
<a href="https://learn.unity.com/">教程</a><a href="https://answers.unity3d.com">社区答案</a><a href="https://support.unity3d.com/hc/en-us">知识库</a><a href="https://forum.unity3d.com">论坛</a><a href="https://unity3d.com/asset-store">Asset Store</a>
</div>
</div>
<div></div>
</div>
</div></div></div>
</div>
</body>
</html>
