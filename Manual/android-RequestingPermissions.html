<!DOCTYPE html><html class="no-js" lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-5V25JL6');
    </script><link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="twitter:card" content="summary">
<meta property="og:title" content="Request runtime permissions - Unity 手册">
<title>Request runtime permissions - Unity 手册</title>
<meta property="og:image" content="https://docs.unity3d.com/cn/2021.3/uploads/Main/android-player-settings-tab.png">
<meta name="description" content="This page explains how to request the user&amp;#8217;s permission for your application to access data on the device or use a device feature such as a built-in camera or microphone.">
<meta property="og:description" content="This page explains how to request the user&amp;#8217;s permission for your application to access data on the device or use a device feature such as a built-in camera or microphone.">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836"></script><script type="text/javascript">
        function OptanonWrapper() { }
    </script><script>
      var docs_type = 'Manual';
      var lang = 'cn';
      var page = 'android-RequestingPermissions';
      if(!page) page = 'index';
      var version = '2021.3';
      var docs_versions = [{version: '2022.1',version_string: '2022.1',supported: true},{version: '2021.3',version_string: '2021.3',supported: true},{version: '2021.2',version_string: '2021.2',supported: false},{version: '2021.1',version_string: '2021.1',supported: false},{version: '2020.3',version_string: '2020.3',supported: true},{version: '2020.2',version_string: '2020.2',supported: false},{version: '2020.1',version_string: '2020.1',supported: false},{version: '2019.4',version_string: '2019.4',supported: true},{version: '2019.3',version_string: '2019.3',supported: false},{version: '2019.2',version_string: '2019.2',supported: false},{version: '2019.1',version_string: '2019.1',supported: false},{version: '2018.4',version_string: '2018.4',supported: false},{version: '2018.3',version_string: '2018.3',supported: false},{version: '2018.2',version_string: '2018.2',supported: false},{version: '2018.1',version_string: '2018.1',supported: false},{version: '2017.4',version_string: '2017.4',supported: false},{version: '2017.3',version_string: '2017.3',supported: false},{version: '2017.2',version_string: '2017.2',supported: false},{version: '2017.1',version_string: '2017.1',supported: false},{version: '5.6',version_string: '560',supported: false},];</script><script type="text/javascript" src="../StaticFiles/js/jquery.js"></script><script type="text/javascript" src="../StaticFiles/js/core.js"></script><script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js"></script><script type="text/javascript" src="docdata/toc.js"></script><script type="text/javascript" src=""></script><script type="text/javascript" src="../StaticFiles/js/custom.js"></script><link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css">
<link rel="canonical" href="https://docs.unity3d.com/cn/2021.3/Manual/android-RequestingPermissions.html">
<link rel="alternate" href="https://docs.unity3d.com/en/2021.3/Manual/android-RequestingPermissions.html" hreflang="en">
<link rel="alternate" href="https://docs.unity3d.com/cn/2021.3/Manual/android-RequestingPermissions.html" hreflang="zh">
<link rel="alternate" href="https://docs.unity3d.com/ja/2021.3/Manual/android-RequestingPermissions.html" hreflang="ja">
<link rel="alternate" href="https://docs.unity3d.com/es/2021.3/Manual/android-RequestingPermissions.html" hreflang="es">
<link rel="alternate" href="https://docs.unity3d.com/kr/2021.3/Manual/android-RequestingPermissions.html" hreflang="ko">
<link rel="alternate" href="https://docs.unity3d.com/ru/2021.3/Manual/android-RequestingPermissions.html" hreflang="ru">
<link rel="alternate" href="https://docs.unity3d.com/2021.3/Documentation/Manual/android-RequestingPermissions.html" hreflang="x-default">
</head>
<body>
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="./index.html"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="搜索手册..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul class="menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">
                unity3d.com
              </a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2021.3</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;">
<ul class="versions">
<li class="supported"><a class="docs_version_url_2022.1" href="/cn/2022.1/Manual/android-RequestingPermissions.html">2022.1</a></li>
<li class="supported"><a class="docs_version_url_2021.3" href="/cn/2021.3/Manual/android-RequestingPermissions.html">2021.3</a></li>
<li class=""><a class="docs_version_url_2021.2" href="/cn/2021.2/Manual/android-RequestingPermissions.html">2021.2</a></li>
<li class=""><a class="docs_version_url_2021.1" href="/cn/2021.1/Manual/android-RequestingPermissions.html">2021.1</a></li>
<li class="supported"><a class="docs_version_url_2020.3" href="/cn/2020.3/Manual/android-RequestingPermissions.html">2020.3</a></li>
<li class=""><a class="docs_version_url_2020.2" href="/cn/2020.2/Manual/android-RequestingPermissions.html">2020.2</a></li>
<li class=""><a class="docs_version_url_2020.1" href="/cn/2020.1/Manual/android-RequestingPermissions.html">2020.1</a></li>
<li class="supported"><a class="docs_version_url_2019.4" href="/cn/2019.4/Manual/android-RequestingPermissions.html">2019.4</a></li>
<li class=""><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/android-RequestingPermissions.html">2019.3</a></li>
<li class=""><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/android-RequestingPermissions.html">2019.2</a></li>
<li class=""><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/android-RequestingPermissions.html">2019.1</a></li>
<li class=""><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/android-RequestingPermissions.html">2018.4</a></li>
<li class=""><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/android-RequestingPermissions.html">2018.3</a></li>
<li class=""><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/android-RequestingPermissions.html">2018.2</a></li>
<li class=""><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/android-RequestingPermissions.html">2018.1</a></li>
<li class=""><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/android-RequestingPermissions.html">2017.4</a></li>
<li class=""><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/android-RequestingPermissions.html">2017.3</a></li>
<li class=""><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/android-RequestingPermissions.html">2017.2</a></li>
<li class=""><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/android-RequestingPermissions.html">2017.1</a></li>
<li class=""><a class="docs_version_url_560" href="/cn/560/Manual/android-RequestingPermissions.html">5.6</a></li>
<div class="versionsWithThisPage" style="display:none;"><li><p>包含此页的版本：</p></li></div>
<div class="versionsWithoutThisPage" style="display:none;"><li><p>不含此页的版本：</p></li></div>
</ul>
<ul class="description">
<li>
<div class="supported-box"></div>受支持</li>
<li>
<div class="legacy-box"></div>旧版</li>
</ul>
</div>
</div>
<ul class="nav-menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">语言:
        <span class="b">中文</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a data-lang="en" href="/2021.3/Documentation/Manual/android-RequestingPermissions.html">English</a></li>
<li><a data-lang="cn" href="/cn/2021.3/Manual/android-RequestingPermissions.html">中文</a></li>
<li><a data-lang="ja" href="/ja/2021.3/Manual/android-RequestingPermissions.html">日本語</a></li>
<li><a data-lang="es" href="/es/2021.3/Manual/android-RequestingPermissions.html">Español</a></li>
<li><a data-lang="kr" href="/kr/2021.3/Manual/android-RequestingPermissions.html">한국어</a></li>
<li><a data-lang="ru" href="/ru/2021.3/Manual/android-RequestingPermissions.html">Русский</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar hidden"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc">
<h2>手册</h2>
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2021.3</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;">
<ul class="versions">
<li class="supported"><a class="docs_version_url_2022.1" href="/cn/2022.1/Manual/android-RequestingPermissions.html">2022.1</a></li>
<li class="supported"><a class="docs_version_url_2021.3" href="/cn/2021.3/Manual/android-RequestingPermissions.html">2021.3</a></li>
<li class=""><a class="docs_version_url_2021.2" href="/cn/2021.2/Manual/android-RequestingPermissions.html">2021.2</a></li>
<li class=""><a class="docs_version_url_2021.1" href="/cn/2021.1/Manual/android-RequestingPermissions.html">2021.1</a></li>
<li class="supported"><a class="docs_version_url_2020.3" href="/cn/2020.3/Manual/android-RequestingPermissions.html">2020.3</a></li>
<li class=""><a class="docs_version_url_2020.2" href="/cn/2020.2/Manual/android-RequestingPermissions.html">2020.2</a></li>
<li class=""><a class="docs_version_url_2020.1" href="/cn/2020.1/Manual/android-RequestingPermissions.html">2020.1</a></li>
<li class="supported"><a class="docs_version_url_2019.4" href="/cn/2019.4/Manual/android-RequestingPermissions.html">2019.4</a></li>
<li class=""><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/android-RequestingPermissions.html">2019.3</a></li>
<li class=""><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/android-RequestingPermissions.html">2019.2</a></li>
<li class=""><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/android-RequestingPermissions.html">2019.1</a></li>
<li class=""><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/android-RequestingPermissions.html">2018.4</a></li>
<li class=""><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/android-RequestingPermissions.html">2018.3</a></li>
<li class=""><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/android-RequestingPermissions.html">2018.2</a></li>
<li class=""><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/android-RequestingPermissions.html">2018.1</a></li>
<li class=""><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/android-RequestingPermissions.html">2017.4</a></li>
<li class=""><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/android-RequestingPermissions.html">2017.3</a></li>
<li class=""><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/android-RequestingPermissions.html">2017.2</a></li>
<li class=""><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/android-RequestingPermissions.html">2017.1</a></li>
<li class=""><a class="docs_version_url_560" href="/cn/560/Manual/android-RequestingPermissions.html">5.6</a></li>
<div class="versionsWithThisPage" style="display:none;"><li><p>包含此页的版本：</p></li></div>
<div class="versionsWithoutThisPage" style="display:none;"><li><p>不含此页的版本：</p></li></div>
</ul>
<ul class="description">
<li>
<div class="supported-box"></div>受支持</li>
<li>
<div class="legacy-box"></div>旧版</li>
</ul>
</div>
</div>
<div class="clear"></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap opened-sidebar"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual 2021.3 (LTS)</a></li>
<li><a href="PlatformSpecific.html">平台开发</a></li>
<li><a href="android.html">Android</a></li>
<li><a href="android-developing.html">Developing for Android</a></li>
<li><a href="android-device-features-and-permissions.html">Device features and permissions</a></li>
<li>Request runtime permissions</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="android-permissions-declare.html"></a></span><div class="tip">Declare permissions for an application</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="android-building-and-delivering.html"></a></span><div class="tip">Building and delivering for Android</div>
</div>
</div></div>
<h1>Request runtime permissions</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>This page explains how to request the user’s permission for your application to access data on the device or use a device feature such as a built-in camera or microphone.</p>

<p>Google’s guideline for requesting permissions recommends that, if the user denies a permission request once, you should display the reason for the request and present the request again.</p>

<p>For more information on when and how you should request permissions on an Android device, see <a href="https://developer.android.com/training/permissions/usage-notes">App permissions best practices</a> in the Android developer guide.</p>

<h2>先决条件</h2>

<p>The runtime permissions API requires Android version 6 (API level 23). To change your application’s target API:</p>

<ol>
<li>Select <strong>Edit</strong> &gt; <strong>Project Settings</strong>.</li>
<li>In the Project settings window, select the <strong>Player</strong> tab, then open <a href="class-PlayerSettingsAndroid.html">Android Player Settings</a>:<br><img src="../uploads/Main/android-player-settings-tab.png" alt="">
</li>
<li>In the <strong>Publishing Settings</strong> section, set <strong>Target API Level</strong> to at least level 23.</li>
</ol>

<p>Before the application requests permission to use restricted data or a particular device feature, it must declare the permission in its <a href="android-manifest.html">Android App Manifest</a>. For more information, see <a href="android-permissions-declare.html">Declare permissions for an application</a>.</p>

<h2>Request permission at runtime</h2>

<p>The <a href="../ScriptReference/Android.Permission.html">Android.Permission</a> API provides functionality that you can use to check what permissions the application currently has and request permissions that the application requires but doesn’t have.</p>

<p>An overview of the process to request permission at runtime is as follows:</p>

<ol>
<li>Check whether the user has already given the application permission. If they have, you don’t need to request it again.</li>
<li>If the user hasn’t given permission, send a request for permission to access the data or use the device feature that the application requires.</li>
<li>If the user doesn’t give the application permission, disable the application’s functionality that requires the specific permission. If the application can’t work without this functionality, inform the user.</li>
<li>If the user still doesn’t give the application permission, it’s best practice to provide a method that lets the user manually trigger the permission request again from inside the application.</li>
</ol>

<h3>Check if the application has permission</h3>

<p>Use <a href="../ScriptReference/Android.Permission.HasUserAuthorizedPermission.html">Permission.HasUserAuthorizedPermission</a> to check if the user has already given permission for the data or feature the application requires.</p>

<p>For a code sample that shows how to use this API, see <a href="../ScriptReference/Android.Permission.HasUserAuthorizedPermission.html">Permission.HasUserAuthorizedPermission</a>.</p>

<h3>Send a request for permission</h3>

<p>Use <a href="../ScriptReference/Android.Permission.RequestUserPermission.html">Permission.RequestUserPermission</a> to request the permission to use the data or feature. When you call this function, Android opens the system permission dialog that the user can use to approve or deny the permission.</p>

<p>For a code sample that shows how to use this API, see <a href="../ScriptReference/Android.Permission.RequestUserPermission.html">Permission.RequestUserPermission</a>.</p>

<p><strong>Tip</strong>: When you request permission, it’s best practice to show the user a message that explains why the application requires the feature.</p>

<p><strong>Note</strong>: If the user previously checked the <strong>Do not ask me again</strong> option on the system permission dialog, or has denied the permission more than once, <code>RequestUserPermission()</code> doesn’t open the system dialog. In this case, the user must go into the application permission settings and manually turn on the permission.</p>

<h3>Provide a way to manually trigger the permission request</h3>

<p>If the user still denies the application the permission that it requires, provide a way for the user to manually display the permission request dialogue. How to do this depends on the application, but one solution is to provide a button that calls <a href="../ScriptReference/Android.Permission.RequestUserPermission.html">Permission.RequestUserPermission</a>.</p>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="android-permissions-declare.html"></a></span><div class="tip">Declare permissions for an application</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="android-building-and-delivering.html"></a></span><div class="tip">Building and delivering for Android</div>
</div>
</div>
</div>
<div class="footer-wrapper">
<div class="footer clear">
<div class="copy">Copyright © 2022 Unity Technologies. Publication 2021.3</div>
<div class="menu">
<a href="https://learn.unity.com/">教程</a><a href="https://answers.unity3d.com">社区答案</a><a href="https://support.unity3d.com/hc/en-us">知识库</a><a href="https://forum.unity3d.com">论坛</a><a href="https://unity3d.com/asset-store">Asset Store</a>
</div>
</div>
<div></div>
</div>
</div></div></div>
</div>
</body>
</html>
