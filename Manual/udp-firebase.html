<!DOCTYPE html><html class="no-js" lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-5V25JL6');
    </script><link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="twitter:card" content="summary">
<meta property="og:title" content="Using Firebase with UDP builds - Unity 手册">
<title>Using Firebase with UDP builds - Unity 手册</title>
<meta property="og:image" content="https://docs.unity3d.com/cn/2021.3/uploads/Main/udp-firebase-warning.png">
<meta name="description" content="Implementing Firebase in your Android games lets you leverage the Firebase product layer, for example for analytics or crashlytics. If your game uses Firebase, additional configuration is required to support the builds that Unity Distribution Portal (UDP) creates for different stores.">
<meta property="og:description" content="Implementing Firebase in your Android games lets you leverage the Firebase product layer, for example for analytics or crashlytics. If your game uses Firebase, additional configuration is required to support the builds that Unity Distribution Portal (UDP) creates for different stores.">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836"></script><script type="text/javascript">
        function OptanonWrapper() { }
    </script><script>
      var docs_type = 'Manual';
      var lang = 'cn';
      var page = 'udp-firebase';
      if(!page) page = 'index';
      var version = '2021.3';
      var docs_versions = [{version: '2022.1',version_string: '2022.1',supported: true},{version: '2021.3',version_string: '2021.3',supported: true},{version: '2021.2',version_string: '2021.2',supported: false},{version: '2021.1',version_string: '2021.1',supported: false},{version: '2020.3',version_string: '2020.3',supported: true},{version: '2020.2',version_string: '2020.2',supported: false},{version: '2020.1',version_string: '2020.1',supported: false},{version: '2019.4',version_string: '2019.4',supported: true},{version: '2019.3',version_string: '2019.3',supported: false},{version: '2019.2',version_string: '2019.2',supported: false},{version: '2019.1',version_string: '2019.1',supported: false},{version: '2018.4',version_string: '2018.4',supported: false},{version: '2018.3',version_string: '2018.3',supported: false},{version: '2018.2',version_string: '2018.2',supported: false},{version: '2018.1',version_string: '2018.1',supported: false},{version: '2017.4',version_string: '2017.4',supported: false},{version: '2017.3',version_string: '2017.3',supported: false},{version: '2017.2',version_string: '2017.2',supported: false},{version: '2017.1',version_string: '2017.1',supported: false},{version: '5.6',version_string: '560',supported: false},];</script><script type="text/javascript" src="../StaticFiles/js/jquery.js"></script><script type="text/javascript" src="../StaticFiles/js/core.js"></script><script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js"></script><script type="text/javascript" src="docdata/toc.js"></script><script type="text/javascript" src=""></script><script type="text/javascript" src="../StaticFiles/js/custom.js"></script><link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css">
<link rel="canonical" href="https://docs.unity3d.com/cn/2021.3/Manual/udp-firebase.html">
<link rel="alternate" href="https://docs.unity3d.com/en/2021.3/Manual/udp-firebase.html" hreflang="en">
<link rel="alternate" href="https://docs.unity3d.com/cn/2021.3/Manual/udp-firebase.html" hreflang="zh">
<link rel="alternate" href="https://docs.unity3d.com/ja/2021.3/Manual/udp-firebase.html" hreflang="ja">
<link rel="alternate" href="https://docs.unity3d.com/es/2021.3/Manual/udp-firebase.html" hreflang="es">
<link rel="alternate" href="https://docs.unity3d.com/kr/2021.3/Manual/udp-firebase.html" hreflang="ko">
<link rel="alternate" href="https://docs.unity3d.com/ru/2021.3/Manual/udp-firebase.html" hreflang="ru">
<link rel="alternate" href="https://docs.unity3d.com/2021.3/Documentation/Manual/udp-firebase.html" hreflang="x-default">
</head>
<body>
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="./index.html"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="搜索手册..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul class="menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">
                unity3d.com
              </a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2021.3</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;">
<ul class="versions">
<li class="supported"><a class="docs_version_url_2022.1" href="/cn/2022.1/Manual/udp-firebase.html">2022.1</a></li>
<li class="supported"><a class="docs_version_url_2021.3" href="/cn/2021.3/Manual/udp-firebase.html">2021.3</a></li>
<li class=""><a class="docs_version_url_2021.2" href="/cn/2021.2/Manual/udp-firebase.html">2021.2</a></li>
<li class=""><a class="docs_version_url_2021.1" href="/cn/2021.1/Manual/udp-firebase.html">2021.1</a></li>
<li class="supported"><a class="docs_version_url_2020.3" href="/cn/2020.3/Manual/udp-firebase.html">2020.3</a></li>
<li class=""><a class="docs_version_url_2020.2" href="/cn/2020.2/Manual/udp-firebase.html">2020.2</a></li>
<li class=""><a class="docs_version_url_2020.1" href="/cn/2020.1/Manual/udp-firebase.html">2020.1</a></li>
<li class="supported"><a class="docs_version_url_2019.4" href="/cn/2019.4/Manual/udp-firebase.html">2019.4</a></li>
<li class=""><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/udp-firebase.html">2019.3</a></li>
<li class=""><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/udp-firebase.html">2019.2</a></li>
<li class=""><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/udp-firebase.html">2019.1</a></li>
<li class=""><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/udp-firebase.html">2018.4</a></li>
<li class=""><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/udp-firebase.html">2018.3</a></li>
<li class=""><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/udp-firebase.html">2018.2</a></li>
<li class=""><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/udp-firebase.html">2018.1</a></li>
<li class=""><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/udp-firebase.html">2017.4</a></li>
<li class=""><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/udp-firebase.html">2017.3</a></li>
<li class=""><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/udp-firebase.html">2017.2</a></li>
<li class=""><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/udp-firebase.html">2017.1</a></li>
<li class=""><a class="docs_version_url_560" href="/cn/560/Manual/udp-firebase.html">5.6</a></li>
<div class="versionsWithThisPage" style="display:none;"><li><p>包含此页的版本：</p></li></div>
<div class="versionsWithoutThisPage" style="display:none;"><li><p>不含此页的版本：</p></li></div>
</ul>
<ul class="description">
<li>
<div class="supported-box"></div>受支持</li>
<li>
<div class="legacy-box"></div>旧版</li>
</ul>
</div>
</div>
<ul class="nav-menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">语言:
        <span class="b">中文</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a data-lang="en" href="/2021.3/Documentation/Manual/udp-firebase.html">English</a></li>
<li><a data-lang="cn" href="/cn/2021.3/Manual/udp-firebase.html">中文</a></li>
<li><a data-lang="ja" href="/ja/2021.3/Manual/udp-firebase.html">日本語</a></li>
<li><a data-lang="es" href="/es/2021.3/Manual/udp-firebase.html">Español</a></li>
<li><a data-lang="kr" href="/kr/2021.3/Manual/udp-firebase.html">한국어</a></li>
<li><a data-lang="ru" href="/ru/2021.3/Manual/udp-firebase.html">Русский</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar hidden"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc">
<h2>手册</h2>
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2021.3</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;">
<ul class="versions">
<li class="supported"><a class="docs_version_url_2022.1" href="/cn/2022.1/Manual/udp-firebase.html">2022.1</a></li>
<li class="supported"><a class="docs_version_url_2021.3" href="/cn/2021.3/Manual/udp-firebase.html">2021.3</a></li>
<li class=""><a class="docs_version_url_2021.2" href="/cn/2021.2/Manual/udp-firebase.html">2021.2</a></li>
<li class=""><a class="docs_version_url_2021.1" href="/cn/2021.1/Manual/udp-firebase.html">2021.1</a></li>
<li class="supported"><a class="docs_version_url_2020.3" href="/cn/2020.3/Manual/udp-firebase.html">2020.3</a></li>
<li class=""><a class="docs_version_url_2020.2" href="/cn/2020.2/Manual/udp-firebase.html">2020.2</a></li>
<li class=""><a class="docs_version_url_2020.1" href="/cn/2020.1/Manual/udp-firebase.html">2020.1</a></li>
<li class="supported"><a class="docs_version_url_2019.4" href="/cn/2019.4/Manual/udp-firebase.html">2019.4</a></li>
<li class=""><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/udp-firebase.html">2019.3</a></li>
<li class=""><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/udp-firebase.html">2019.2</a></li>
<li class=""><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/udp-firebase.html">2019.1</a></li>
<li class=""><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/udp-firebase.html">2018.4</a></li>
<li class=""><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/udp-firebase.html">2018.3</a></li>
<li class=""><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/udp-firebase.html">2018.2</a></li>
<li class=""><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/udp-firebase.html">2018.1</a></li>
<li class=""><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/udp-firebase.html">2017.4</a></li>
<li class=""><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/udp-firebase.html">2017.3</a></li>
<li class=""><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/udp-firebase.html">2017.2</a></li>
<li class=""><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/udp-firebase.html">2017.1</a></li>
<li class=""><a class="docs_version_url_560" href="/cn/560/Manual/udp-firebase.html">5.6</a></li>
<div class="versionsWithThisPage" style="display:none;"><li><p>包含此页的版本：</p></li></div>
<div class="versionsWithoutThisPage" style="display:none;"><li><p>不含此页的版本：</p></li></div>
</ul>
<ul class="description">
<li>
<div class="supported-box"></div>受支持</li>
<li>
<div class="legacy-box"></div>旧版</li>
</ul>
</div>
</div>
<div class="clear"></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap opened-sidebar"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual 2021.3 (LTS)</a></li>
<li><a href="UnityServices.html">Unity 服务</a></li>
<li><a href="udp.html">Unity 分发平台</a></li>
<li><a href="udp-service-interoperability.html">Using UDP with other services</a></li>
<li>Using Firebase with UDP builds</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="udp-service-interoperability.html"></a></span><div class="tip">Using UDP with other services</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="udp-reference.html"></a></span><div class="tip">UDP 参考</div>
</div>
</div></div>
<h1>Using Firebase with UDP builds</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>Implementing <a href="https://firebase.google.com/">Firebase</a> in your Android games lets you leverage the Firebase product layer, for example for analytics or <a href="https://firebase.google.com/docs/crashlytics">crashlytics</a>. If your game uses Firebase, additional <a href="#config">configuration</a> is required to support the builds that Unity Distribution Portal (<a href="https://unity.com/udp">UDP</a>) creates for different stores.</p>

<p>When your app invokes Firebase products, Firebase checks that the following information matches the details registered on the Firebase console:</p>

<ul>
<li>The package name of the app</li>
<li>The certificate the app was signed with</li>
<li>The google_app_id in the Android package (APK) resource</li>
</ul>

<p>These details must match in order for Firebase to provide accurate analysis.</p>

<p>For certain stores where you publish your game via UDP, UDP adds a store-specific suffix to the package name. Additionally, if you don’t use your own private key to generate the certificate, UDP generates a certificate for each repacked build. These events would cause your certificate and/or package name to no longer match the information on the Firebase console.</p>

<p>The UDP console displays a warning for Firebase services if you register your app to stores that need a package name suffix.</p>

<figure>
<img src="../uploads/Main/udp-firebase-warning.png" alt="Firebase services warning in UDP console">
<figcaption>Firebase services warning in UDP console</figcaption>
</figure>

<p>To enable your store-specific builds to work correctly with Firebase, you must register them with your Firebase project. The following sections explain how to configure Firebase for your UDP builds.</p>

<p><a name="config"></a></p>

<h2>Configuring Firebase for your UDP builds</h2>

<p>This section gives an overview of the steps required to configure Firebase for your UDP builds (apps). For more detailed information, see the <a href="https://firebase.google.com/docs/unity/setup">Firebase documentation</a>.</p>

<h3>Prerequisites</h3>

<ul>
<li>You have <a href="https://firebase.google.com/docs/unity/setup#create-firebase-project">created a Firebase project</a> and added it to your app</li>
<li>You have <a href="https://firebase.google.com/docs/unity/setup#add-sdks">added the Firebase Unity SDKs</a> to your app</li>
<li>You have <a href="udp-managing-and-publishing.html#register">registered your game with a store</a> in the UDP console</li>
<li>If you use the app-signing private key generated by UDP, repack and publish your app to generate a certificate</li>
</ul>

<p><strong>Note</strong>: During the process to register your app, you can download a google-services.json file. Unity recommends that you register all your package versions before you download this file.</p>

<ol>
<li>
<a href="https://firebase.google.com/docs/unity/setup#register-app">Register your app with Firebase</a>.

<ul>
<li>Use the store-specific package name from the UDP console: <strong>My Games</strong> &gt; <strong>Publish</strong> &gt; <strong>Store</strong> &gt; <strong>Advanced</strong> page.</li>
</ul>
</li>
<li>In the Firebase console, go to Project Settings and add your app’s fingerprint store certificate.

<ul>
<li>If you use your own key, get your fingerprint with the command:<br><code>keytool -keystore path-to-your-keystore -list -v</code>
</li>
<li>If you don’t use your own key, use the SHA1 certificate for the corresponding UDP store (<strong>UDP Console</strong> &gt; <strong>My Games</strong> &gt; <strong>Publish</strong> &gt; <strong>Store</strong> &gt; <strong>Advanced</strong>)</li>
<li>You can also download the APK certificate and get the fingerprint information with the command:<br><code>openssl x509 -in path-to-your-certificate -fingerprint -noout</code>
</li>
</ul>
</li>
</ol>

<p>Repeat these steps for each store-specific app you want to link to your Firebase project.
Firebase adds an App ID for each app you add.</p>

<p>When you’ve registered all your apps, <a href="https://firebase.google.com/docs/unity/setup#add-config-file">add the Firebase configuration file</a> to your Unity project.</p>

<h2>Adding Firebase configuration files</h2>

<p>When you register an app in Firebase, Firebase creates a google-services.json configuration file. When you’ve added all your apps to Firebase, download the file and add it to your project.</p>

<ol>
<li>In the Firebase console go to your app’s Project Settings page.</li>
<li>Download the google-services.json file.</li>
<li>Copy the google-services.json file into your Unity project’s <strong>Assets</strong> folder.</li>
</ol>

<p>Your project is now properly configured for Firebase. To ensure stable operation of your app, rebuild and publish your project.</p>

<h2>Adding your Firebase ID in the UDP console</h2>

<p>For each build you’ve added to Firebase, in the UDP console, add the App ID:</p>

<ol>
<li>Copy the build-specific App ID from Firebase.</li>
<li>In the UDP console, go to <strong>My Games</strong> &gt; <strong>Publish</strong> &gt; <strong>Store</strong> &gt; <strong>Advanced</strong> page.

<ol>
<li>Paste the App ID into the <strong>Firebase App ID</strong> field.
1.选择<strong>保存</strong>。</li>
</ol>
</li>
</ol>

<h2>Rebuilding your project</h2>

<ol>
<li>In the Unity Editor, <a href="https://docs.unity3d.com/Packages/com.unity.purchasing.udp@latest/index.html?subfolder=/manual/building-your-game.html">rebuild your project</a>.</li>
<li>Upload your build to the UDP console.</li>
<li>Release a new revision.</li>
<li>In the Publish tab, select each store you want to publish.

<ol>
<li>Set the target step to <strong>Submit to Store</strong>.</li>
<li>Select <strong>Publish</strong>.</li>
</ol>
</li>
</ol>

<p>For more information on these steps, see <a href="udp-managing-and-publishing.html">Managing and publishing your game on the UDP console</a>.</p>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="udp-service-interoperability.html"></a></span><div class="tip">Using UDP with other services</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="udp-reference.html"></a></span><div class="tip">UDP 参考</div>
</div>
</div>
</div>
<div class="footer-wrapper">
<div class="footer clear">
<div class="copy">Copyright © 2022 Unity Technologies. Publication 2021.3</div>
<div class="menu">
<a href="https://learn.unity.com/">教程</a><a href="https://answers.unity3d.com">社区答案</a><a href="https://support.unity3d.com/hc/en-us">知识库</a><a href="https://forum.unity3d.com">论坛</a><a href="https://unity3d.com/asset-store">Asset Store</a>
</div>
</div>
<div></div>
</div>
</div></div></div>
</div>
</body>
</html>
