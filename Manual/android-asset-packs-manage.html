<!DOCTYPE html><html class="no-js" lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-5V25JL6');
    </script><link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="twitter:card" content="summary">
<meta property="og:title" content="Manage asset packs at runtime - Unity 手册">
<title>Manage asset packs at runtime - Unity 手册</title>
<meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg">
<meta name="description" content="Unity provides APIs to manage asset packs at runtime. They use Google’s PlayCore API, which means they have the same limitations as PlayCore, and can’t manage install-time asset packs. Using the PlayCore API also means your application requires the PlayCore plugin. If your project has asset packs, either custom asset packs or Unity-generated asset packs, Unity automatically adds the PlayCore dependency to the application’s manifest.">
<meta property="og:description" content="Unity provides APIs to manage asset packs at runtime. They use Google’s PlayCore API, which means they have the same limitations as PlayCore, and can’t manage install-time asset packs. Using the PlayCore API also means your application requires the PlayCore plugin. If your project has asset packs, either custom asset packs or Unity-generated asset packs, Unity automatically adds the PlayCore dependency to the application’s manifest.">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836"></script><script type="text/javascript">
        function OptanonWrapper() { }
    </script><script>
      var docs_type = 'Manual';
      var lang = 'cn';
      var page = 'android-asset-packs-manage';
      if(!page) page = 'index';
      var version = '2021.3';
      var docs_versions = [{version: '2022.1',version_string: '2022.1',supported: true},{version: '2021.3',version_string: '2021.3',supported: true},{version: '2021.2',version_string: '2021.2',supported: false},{version: '2021.1',version_string: '2021.1',supported: false},{version: '2020.3',version_string: '2020.3',supported: true},{version: '2020.2',version_string: '2020.2',supported: false},{version: '2020.1',version_string: '2020.1',supported: false},{version: '2019.4',version_string: '2019.4',supported: true},{version: '2019.3',version_string: '2019.3',supported: false},{version: '2019.2',version_string: '2019.2',supported: false},{version: '2019.1',version_string: '2019.1',supported: false},{version: '2018.4',version_string: '2018.4',supported: false},{version: '2018.3',version_string: '2018.3',supported: false},{version: '2018.2',version_string: '2018.2',supported: false},{version: '2018.1',version_string: '2018.1',supported: false},{version: '2017.4',version_string: '2017.4',supported: false},{version: '2017.3',version_string: '2017.3',supported: false},{version: '2017.2',version_string: '2017.2',supported: false},{version: '2017.1',version_string: '2017.1',supported: false},{version: '5.6',version_string: '560',supported: false},];</script><script type="text/javascript" src="../StaticFiles/js/jquery.js"></script><script type="text/javascript" src="../StaticFiles/js/core.js"></script><script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js"></script><script type="text/javascript" src="docdata/toc.js"></script><script type="text/javascript" src=""></script><script type="text/javascript" src="../StaticFiles/js/custom.js"></script><link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css">
<link rel="canonical" href="https://docs.unity3d.com/cn/2021.3/Manual/android-asset-packs-manage.html">
<link rel="alternate" href="https://docs.unity3d.com/en/2021.3/Manual/android-asset-packs-manage.html" hreflang="en">
<link rel="alternate" href="https://docs.unity3d.com/cn/2021.3/Manual/android-asset-packs-manage.html" hreflang="zh">
<link rel="alternate" href="https://docs.unity3d.com/ja/2021.3/Manual/android-asset-packs-manage.html" hreflang="ja">
<link rel="alternate" href="https://docs.unity3d.com/es/2021.3/Manual/android-asset-packs-manage.html" hreflang="es">
<link rel="alternate" href="https://docs.unity3d.com/kr/2021.3/Manual/android-asset-packs-manage.html" hreflang="ko">
<link rel="alternate" href="https://docs.unity3d.com/ru/2021.3/Manual/android-asset-packs-manage.html" hreflang="ru">
<link rel="alternate" href="https://docs.unity3d.com/2021.3/Documentation/Manual/android-asset-packs-manage.html" hreflang="x-default">
</head>
<body>
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="./index.html"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="搜索手册..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul class="menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">
                unity3d.com
              </a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2021.3</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;">
<ul class="versions">
<li class="supported"><a class="docs_version_url_2022.1" href="/cn/2022.1/Manual/android-asset-packs-manage.html">2022.1</a></li>
<li class="supported"><a class="docs_version_url_2021.3" href="/cn/2021.3/Manual/android-asset-packs-manage.html">2021.3</a></li>
<li class=""><a class="docs_version_url_2021.2" href="/cn/2021.2/Manual/android-asset-packs-manage.html">2021.2</a></li>
<li class=""><a class="docs_version_url_2021.1" href="/cn/2021.1/Manual/android-asset-packs-manage.html">2021.1</a></li>
<li class="supported"><a class="docs_version_url_2020.3" href="/cn/2020.3/Manual/android-asset-packs-manage.html">2020.3</a></li>
<li class=""><a class="docs_version_url_2020.2" href="/cn/2020.2/Manual/android-asset-packs-manage.html">2020.2</a></li>
<li class=""><a class="docs_version_url_2020.1" href="/cn/2020.1/Manual/android-asset-packs-manage.html">2020.1</a></li>
<li class="supported"><a class="docs_version_url_2019.4" href="/cn/2019.4/Manual/android-asset-packs-manage.html">2019.4</a></li>
<li class=""><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/android-asset-packs-manage.html">2019.3</a></li>
<li class=""><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/android-asset-packs-manage.html">2019.2</a></li>
<li class=""><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/android-asset-packs-manage.html">2019.1</a></li>
<li class=""><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/android-asset-packs-manage.html">2018.4</a></li>
<li class=""><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/android-asset-packs-manage.html">2018.3</a></li>
<li class=""><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/android-asset-packs-manage.html">2018.2</a></li>
<li class=""><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/android-asset-packs-manage.html">2018.1</a></li>
<li class=""><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/android-asset-packs-manage.html">2017.4</a></li>
<li class=""><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/android-asset-packs-manage.html">2017.3</a></li>
<li class=""><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/android-asset-packs-manage.html">2017.2</a></li>
<li class=""><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/android-asset-packs-manage.html">2017.1</a></li>
<li class=""><a class="docs_version_url_560" href="/cn/560/Manual/android-asset-packs-manage.html">5.6</a></li>
<div class="versionsWithThisPage" style="display:none;"><li><p>包含此页的版本：</p></li></div>
<div class="versionsWithoutThisPage" style="display:none;"><li><p>不含此页的版本：</p></li></div>
</ul>
<ul class="description">
<li>
<div class="supported-box"></div>受支持</li>
<li>
<div class="legacy-box"></div>旧版</li>
</ul>
</div>
</div>
<ul class="nav-menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">语言:
        <span class="b">中文</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a data-lang="en" href="/2021.3/Documentation/Manual/android-asset-packs-manage.html">English</a></li>
<li><a data-lang="cn" href="/cn/2021.3/Manual/android-asset-packs-manage.html">中文</a></li>
<li><a data-lang="ja" href="/ja/2021.3/Manual/android-asset-packs-manage.html">日本語</a></li>
<li><a data-lang="es" href="/es/2021.3/Manual/android-asset-packs-manage.html">Español</a></li>
<li><a data-lang="kr" href="/kr/2021.3/Manual/android-asset-packs-manage.html">한국어</a></li>
<li><a data-lang="ru" href="/ru/2021.3/Manual/android-asset-packs-manage.html">Русский</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar hidden"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc">
<h2>手册</h2>
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2021.3</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;">
<ul class="versions">
<li class="supported"><a class="docs_version_url_2022.1" href="/cn/2022.1/Manual/android-asset-packs-manage.html">2022.1</a></li>
<li class="supported"><a class="docs_version_url_2021.3" href="/cn/2021.3/Manual/android-asset-packs-manage.html">2021.3</a></li>
<li class=""><a class="docs_version_url_2021.2" href="/cn/2021.2/Manual/android-asset-packs-manage.html">2021.2</a></li>
<li class=""><a class="docs_version_url_2021.1" href="/cn/2021.1/Manual/android-asset-packs-manage.html">2021.1</a></li>
<li class="supported"><a class="docs_version_url_2020.3" href="/cn/2020.3/Manual/android-asset-packs-manage.html">2020.3</a></li>
<li class=""><a class="docs_version_url_2020.2" href="/cn/2020.2/Manual/android-asset-packs-manage.html">2020.2</a></li>
<li class=""><a class="docs_version_url_2020.1" href="/cn/2020.1/Manual/android-asset-packs-manage.html">2020.1</a></li>
<li class="supported"><a class="docs_version_url_2019.4" href="/cn/2019.4/Manual/android-asset-packs-manage.html">2019.4</a></li>
<li class=""><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/android-asset-packs-manage.html">2019.3</a></li>
<li class=""><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/android-asset-packs-manage.html">2019.2</a></li>
<li class=""><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/android-asset-packs-manage.html">2019.1</a></li>
<li class=""><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/android-asset-packs-manage.html">2018.4</a></li>
<li class=""><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/android-asset-packs-manage.html">2018.3</a></li>
<li class=""><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/android-asset-packs-manage.html">2018.2</a></li>
<li class=""><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/android-asset-packs-manage.html">2018.1</a></li>
<li class=""><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/android-asset-packs-manage.html">2017.4</a></li>
<li class=""><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/android-asset-packs-manage.html">2017.3</a></li>
<li class=""><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/android-asset-packs-manage.html">2017.2</a></li>
<li class=""><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/android-asset-packs-manage.html">2017.1</a></li>
<li class=""><a class="docs_version_url_560" href="/cn/560/Manual/android-asset-packs-manage.html">5.6</a></li>
<div class="versionsWithThisPage" style="display:none;"><li><p>包含此页的版本：</p></li></div>
<div class="versionsWithoutThisPage" style="display:none;"><li><p>不含此页的版本：</p></li></div>
</ul>
<ul class="description">
<li>
<div class="supported-box"></div>受支持</li>
<li>
<div class="legacy-box"></div>旧版</li>
</ul>
</div>
</div>
<div class="clear"></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap opened-sidebar"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual 2021.3 (LTS)</a></li>
<li><a href="PlatformSpecific.html">平台开发</a></li>
<li><a href="android.html">Android</a></li>
<li><a href="android-developing.html">Developing for Android</a></li>
<li><a href="android-application-size-restrictions.html">Android application size restrictions</a></li>
<li><a href="play-asset-delivery.html">Play 资源交付</a></li>
<li>Manage asset packs at runtime</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="android-asset-packs-create-custom.html"></a></span><div class="tip">Create a custom asset pack</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="android-graphics.html"></a></span><div class="tip">Graphics for Android</div>
</div>
</div></div>
<h1>Manage asset packs at runtime</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>Unity provides <a href="../ScriptReference/Android.AndroidAssetPacks.html">APIs</a> to manage asset packs at runtime. They use Google’s PlayCore API, which means they have the same limitations as PlayCore, and can’t manage <code>install-time</code> asset packs. Using the PlayCore API also means your application requires the <a href="https://developer.android.com/guide/playcore">PlayCore</a> plugin. If your project has asset packs, either custom asset packs or Unity-generated asset packs, Unity automatically adds the PlayCore dependency to the application’s manifest.</p>

<p>您下载资源包并访问其资源的方式取决于资源包的交付方式。有三种资源包交付模式：</p>

<ul>
<li>
<code>install-time</code>: Google Play automatically downloads <code>install-time</code> asset packs when the device installs the application. Google Play considers these asset packs to be part of the base application, and an end user can’t uninstall them without uninstalling the entire application. The PlayCore API doesn’t handle <code>install-time</code> asset packs, which means that you can’t check the status, request to download, or remove <code>install-time</code> asset packs. You also can’t directly access assets inside of these asset packs, except streaming assets in Unity-generated <code>install-time</code> asset packs. To access streaming assets, use <a href="../ScriptReference/Application-streamingAssetsPath.html">Application.streamingAssetsPath</a> to get the path to streaming assets location, then use <a href="../ScriptReference/Networking.UnityWebRequest.html">UnityWebRequest</a> to access assets in that path. If you create a custom asset pack, you can’t access assets inside it using standard file APIs. Instead, use <a href="https://developer.android.com/guide/playcore/asset-delivery/integrate-java#install-time-delivery">Android’s AssetManager APIs</a>.</li>
<li>
<code>fast-follow</code>: Google Play automatically starts to download <code>fast-follow</code> asset packs after it installs the application. However, it is possible that not all <code>fast-follow</code> asset packs are available on the first time the application launches. To check the status and download <code>fast-follow</code> asset packs, see <a href="#download-asset-packs">Download asset packs</a>.</li>
<li>
<code>on-demand</code>: Google Play doesn’t automatically download <code>on-demand</code> asset packs. You have to manually start the download. For information on how to do this, see below.</li>
</ul>

<p>有关交付模式的更多信息，请参阅<a href="https://developer.android.com/guide/playcore/asset-delivery#delivery-modes">交付模式</a>。</p>

<p><a name="download-asset-packs"></a></p>

<h2>Download asset packs</h2>

<p>If your application uses <code>fast-follow</code> or <code>on-demand</code> asset packs, the device must download these asset packs before the application can access assets inside of them. To check the status of asset packs and download them if they are not on the device, you must first know the name of each asset pack. To get the names of Unity-generated asset packs, call <a href="../ScriptReference/Android.AndroidAssetPacks.GetCoreUnityAssetPackNames.html">AndroidAssetPacks.GetCoreUnityAssetPackNames</a>. There is no runtime API to get the names of <a href="android-asset-packs-in-unity.html#custom-asset-packs">custom asset packs</a> so you must keep track of them yourself. You set the name of custom asset packs at build time; it’s the name of the directory.</p>

<p>获得资源包的名称后，要检查每个资源包的状态，请传入资源包名称调用 <a href="../ScriptReference/Android.AndroidAssetPacks.GetAssetPackStateAsync.html">AndroidAssetPacks.GetAssetPackStateAsync</a>。这将返回您查询的资源包的状态，您可以根据结果确定是否需要下载资源包。如果您想快速查询每个 Unity 生成的资源包的状态，您可以使用 <a href="../ScriptReference/Android.AndroidAssetPacks-coreUnityAssetPacksDownloaded.html">AndroidAssetPacks.coreUnityAssetPacksDownloaded</a>。这很有用，因为在加载第一个场景以外的任何场景或尝试访问 Unity 处理的其他资源之前，您必须确保每个 Unity 生成的资源包都可用。</p>

<p>For every asset pack you need to download, call <a href="../ScriptReference/Android.AndroidAssetPacks.DownloadAssetPackAsync.html">AndroidAssetPacks.DownloadAssetPackAsync</a>, passing in the asset pack name. While the asset pack downloads, monitor the download status because downloads can pause or fail. There are two ways to do this:</p>

<ul>
<li>定期检查 AndroidAssetPacks.DownloadAssetPackAsync 返回的 <a href="../ScriptReference/Android.DownloadAssetPackAsyncOperation.html">DownloadAssetPackAsyncOperation</a> 实例。</li>
<li>Use the version of <a href="../ScriptReference/Android.AndroidAssetPacks.DownloadAssetPackAsync.html">AndroidAssetPacks.DownloadAssetPackAsync</a> that takes a callback as its second parameter. The callback you pass in must take an <a href="../ScriptReference/Android.AndroidAssetPackInfo.html">AndroidAssetPackInfo</a> as a parameter that you can use to determine the state of the download.</li>
</ul>

<h2>其他资源</h2>

<ul>
<li><a href="android-asset-packs-in-unity.html">Asset packs in Unity</a></li>
</ul>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="android-asset-packs-create-custom.html"></a></span><div class="tip">Create a custom asset pack</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="android-graphics.html"></a></span><div class="tip">Graphics for Android</div>
</div>
</div>
</div>
<div class="footer-wrapper">
<div class="footer clear">
<div class="copy">Copyright © 2022 Unity Technologies. Publication 2021.3</div>
<div class="menu">
<a href="https://learn.unity.com/">教程</a><a href="https://answers.unity3d.com">社区答案</a><a href="https://support.unity3d.com/hc/en-us">知识库</a><a href="https://forum.unity3d.com">论坛</a><a href="https://unity3d.com/asset-store">Asset Store</a>
</div>
</div>
<div></div>
</div>
</div></div></div>
</div>
</body>
</html>
