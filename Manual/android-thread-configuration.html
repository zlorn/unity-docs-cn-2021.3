<!DOCTYPE html><html class="no-js" lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-5V25JL6');
    </script><link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="twitter:card" content="summary">
<meta property="og:title" content="Android thread configuration - Unity 手册">
<title>Android thread configuration - Unity 手册</title>
<meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg">
<meta name="description" content="Unity configures thread affinity and thread priority based on the CPU topology of the device. Unity’s default thread configuration works well for most projects, but in some situations, you might want to change the thread configuration (for example, if you want to optimize for specific devices, or if your application aims for low power consumption and doesn&amp;#8217;t require high frame rates).">
<meta property="og:description" content="Unity configures thread affinity and thread priority based on the CPU topology of the device. Unity’s default thread configuration works well for most projects, but in some situations, you might want to change the thread configuration (for example, if you want to optimize for specific devices, or if your application aims for low power consumption and doesn&amp;#8217;t require high frame rates).">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836"></script><script type="text/javascript">
        function OptanonWrapper() { }
    </script><script>
      var docs_type = 'Manual';
      var lang = 'cn';
      var page = 'android-thread-configuration';
      if(!page) page = 'index';
      var version = '2021.3';
      var docs_versions = [{version: '2022.1',version_string: '2022.1',supported: true},{version: '2021.3',version_string: '2021.3',supported: true},{version: '2021.2',version_string: '2021.2',supported: false},{version: '2021.1',version_string: '2021.1',supported: false},{version: '2020.3',version_string: '2020.3',supported: true},{version: '2020.2',version_string: '2020.2',supported: false},{version: '2020.1',version_string: '2020.1',supported: false},{version: '2019.4',version_string: '2019.4',supported: true},{version: '2019.3',version_string: '2019.3',supported: false},{version: '2019.2',version_string: '2019.2',supported: false},{version: '2019.1',version_string: '2019.1',supported: false},{version: '2018.4',version_string: '2018.4',supported: false},{version: '2018.3',version_string: '2018.3',supported: false},{version: '2018.2',version_string: '2018.2',supported: false},{version: '2018.1',version_string: '2018.1',supported: false},{version: '2017.4',version_string: '2017.4',supported: false},{version: '2017.3',version_string: '2017.3',supported: false},{version: '2017.2',version_string: '2017.2',supported: false},{version: '2017.1',version_string: '2017.1',supported: false},{version: '5.6',version_string: '560',supported: false},];</script><script type="text/javascript" src="../StaticFiles/js/jquery.js"></script><script type="text/javascript" src="../StaticFiles/js/core.js"></script><script type="text/javascript" src="../StaticFiles/js/jquery.sidebar.min.js"></script><script type="text/javascript" src="docdata/toc.js"></script><script type="text/javascript" src=""></script><script type="text/javascript" src="../StaticFiles/js/custom.js"></script><link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css">
<link rel="stylesheet" type="text/css" href="../StaticFiles/css/custom.css">
<link rel="canonical" href="https://docs.unity3d.com/cn/2021.3/Manual/android-thread-configuration.html">
<link rel="alternate" href="https://docs.unity3d.com/en/2021.3/Manual/android-thread-configuration.html" hreflang="en">
<link rel="alternate" href="https://docs.unity3d.com/cn/2021.3/Manual/android-thread-configuration.html" hreflang="zh">
<link rel="alternate" href="https://docs.unity3d.com/ja/2021.3/Manual/android-thread-configuration.html" hreflang="ja">
<link rel="alternate" href="https://docs.unity3d.com/es/2021.3/Manual/android-thread-configuration.html" hreflang="es">
<link rel="alternate" href="https://docs.unity3d.com/kr/2021.3/Manual/android-thread-configuration.html" hreflang="ko">
<link rel="alternate" href="https://docs.unity3d.com/ru/2021.3/Manual/android-thread-configuration.html" hreflang="ru">
<link rel="alternate" href="https://docs.unity3d.com/2021.3/Documentation/Manual/android-thread-configuration.html" hreflang="x-default">
</head>
<body>
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="./index.html"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="搜索手册..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul class="menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity3d.com/">
                unity3d.com
              </a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2021.3</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;">
<ul class="versions">
<li class="supported"><a class="docs_version_url_2022.1" href="/cn/2022.1/Manual/android-thread-configuration.html">2022.1</a></li>
<li class="supported"><a class="docs_version_url_2021.3" href="/cn/2021.3/Manual/android-thread-configuration.html">2021.3</a></li>
<li class=""><a class="docs_version_url_2021.2" href="/cn/2021.2/Manual/android-thread-configuration.html">2021.2</a></li>
<li class=""><a class="docs_version_url_2021.1" href="/cn/2021.1/Manual/android-thread-configuration.html">2021.1</a></li>
<li class="supported"><a class="docs_version_url_2020.3" href="/cn/2020.3/Manual/android-thread-configuration.html">2020.3</a></li>
<li class=""><a class="docs_version_url_2020.2" href="/cn/2020.2/Manual/android-thread-configuration.html">2020.2</a></li>
<li class=""><a class="docs_version_url_2020.1" href="/cn/2020.1/Manual/android-thread-configuration.html">2020.1</a></li>
<li class="supported"><a class="docs_version_url_2019.4" href="/cn/2019.4/Manual/android-thread-configuration.html">2019.4</a></li>
<li class=""><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/android-thread-configuration.html">2019.3</a></li>
<li class=""><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/android-thread-configuration.html">2019.2</a></li>
<li class=""><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/android-thread-configuration.html">2019.1</a></li>
<li class=""><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/android-thread-configuration.html">2018.4</a></li>
<li class=""><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/android-thread-configuration.html">2018.3</a></li>
<li class=""><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/android-thread-configuration.html">2018.2</a></li>
<li class=""><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/android-thread-configuration.html">2018.1</a></li>
<li class=""><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/android-thread-configuration.html">2017.4</a></li>
<li class=""><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/android-thread-configuration.html">2017.3</a></li>
<li class=""><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/android-thread-configuration.html">2017.2</a></li>
<li class=""><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/android-thread-configuration.html">2017.1</a></li>
<li class=""><a class="docs_version_url_560" href="/cn/560/Manual/android-thread-configuration.html">5.6</a></li>
<div class="versionsWithThisPage" style="display:none;"><li><p>包含此页的版本：</p></li></div>
<div class="versionsWithoutThisPage" style="display:none;"><li><p>不含此页的版本：</p></li></div>
</ul>
<ul class="description">
<li>
<div class="supported-box"></div>受支持</li>
<li>
<div class="legacy-box"></div>旧版</li>
</ul>
</div>
</div>
<ul class="nav-menu-items">
<li class="menu-item"><a href="../Manual/index.html" class="selected">手册</a></li>
<li class="menu-item"><a href="../ScriptReference/index.html" class="">脚本 API</a></li>
</ul>
<div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">语言:
        <span class="b">中文</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a data-lang="en" href="/2021.3/Documentation/Manual/android-thread-configuration.html">English</a></li>
<li><a data-lang="cn" href="/cn/2021.3/Manual/android-thread-configuration.html">中文</a></li>
<li><a data-lang="ja" href="/ja/2021.3/Manual/android-thread-configuration.html">日本語</a></li>
<li><a data-lang="es" href="/es/2021.3/Manual/android-thread-configuration.html">Español</a></li>
<li><a data-lang="kr" href="/kr/2021.3/Manual/android-thread-configuration.html">한국어</a></li>
<li><a data-lang="ru" href="/ru/2021.3/Manual/android-thread-configuration.html">Русский</a></li>
</ul></div>
</div>
</div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar hidden"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc">
<h2>手册</h2>
<div class="version-switcher">
<div class="current toggle" data-target=".version-list"><div class="version-number">
<div class="d-inline-block">
          Version:
          <b>2021.3</b>
</div>
<div class="d-inline-block arrow"></div>
</div></div>
<div class="version-list" style="display:none;">
<ul class="versions">
<li class="supported"><a class="docs_version_url_2022.1" href="/cn/2022.1/Manual/android-thread-configuration.html">2022.1</a></li>
<li class="supported"><a class="docs_version_url_2021.3" href="/cn/2021.3/Manual/android-thread-configuration.html">2021.3</a></li>
<li class=""><a class="docs_version_url_2021.2" href="/cn/2021.2/Manual/android-thread-configuration.html">2021.2</a></li>
<li class=""><a class="docs_version_url_2021.1" href="/cn/2021.1/Manual/android-thread-configuration.html">2021.1</a></li>
<li class="supported"><a class="docs_version_url_2020.3" href="/cn/2020.3/Manual/android-thread-configuration.html">2020.3</a></li>
<li class=""><a class="docs_version_url_2020.2" href="/cn/2020.2/Manual/android-thread-configuration.html">2020.2</a></li>
<li class=""><a class="docs_version_url_2020.1" href="/cn/2020.1/Manual/android-thread-configuration.html">2020.1</a></li>
<li class="supported"><a class="docs_version_url_2019.4" href="/cn/2019.4/Manual/android-thread-configuration.html">2019.4</a></li>
<li class=""><a class="docs_version_url_2019.3" href="/cn/2019.3/Manual/android-thread-configuration.html">2019.3</a></li>
<li class=""><a class="docs_version_url_2019.2" href="/cn/2019.2/Manual/android-thread-configuration.html">2019.2</a></li>
<li class=""><a class="docs_version_url_2019.1" href="/cn/2019.1/Manual/android-thread-configuration.html">2019.1</a></li>
<li class=""><a class="docs_version_url_2018.4" href="/cn/2018.4/Manual/android-thread-configuration.html">2018.4</a></li>
<li class=""><a class="docs_version_url_2018.3" href="/cn/2018.3/Manual/android-thread-configuration.html">2018.3</a></li>
<li class=""><a class="docs_version_url_2018.2" href="/cn/2018.2/Manual/android-thread-configuration.html">2018.2</a></li>
<li class=""><a class="docs_version_url_2018.1" href="/cn/2018.1/Manual/android-thread-configuration.html">2018.1</a></li>
<li class=""><a class="docs_version_url_2017.4" href="/cn/2017.4/Manual/android-thread-configuration.html">2017.4</a></li>
<li class=""><a class="docs_version_url_2017.3" href="/cn/2017.3/Manual/android-thread-configuration.html">2017.3</a></li>
<li class=""><a class="docs_version_url_2017.2" href="/cn/2017.2/Manual/android-thread-configuration.html">2017.2</a></li>
<li class=""><a class="docs_version_url_2017.1" href="/cn/2017.1/Manual/android-thread-configuration.html">2017.1</a></li>
<li class=""><a class="docs_version_url_560" href="/cn/560/Manual/android-thread-configuration.html">5.6</a></li>
<div class="versionsWithThisPage" style="display:none;"><li><p>包含此页的版本：</p></li></div>
<div class="versionsWithoutThisPage" style="display:none;"><li><p>不含此页的版本：</p></li></div>
</ul>
<ul class="description">
<li>
<div class="supported-box"></div>受支持</li>
<li>
<div class="legacy-box"></div>旧版</li>
</ul>
</div>
</div>
<div class="clear"></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap opened-sidebar"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual 2021.3 (LTS)</a></li>
<li><a href="PlatformSpecific.html">平台开发</a></li>
<li><a href="android.html">Android</a></li>
<li><a href="android-developing.html">Developing for Android</a></li>
<li>Android thread configuration</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="deep-linking-android.html"></a></span><div class="tip">Deep linking on Android</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="android-device-features-and-permissions.html"></a></span><div class="tip">Device features and permissions</div>
</div>
</div></div>
<h1>Android thread configuration</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>Unity configures <a href="#thread-affinity">thread affinity</a> and <a href="#thread-priority">thread priority</a> based on the CPU topology of the device. Unity’s default thread configuration works well for most projects, but in some situations, you might want to change the thread configuration (for example, if you want to optimize for specific devices, or if your application aims for low power consumption and doesn’t require high frame rates).</p>

<p><strong>Important</strong>: Use Unity’s default settings when possible. If you change the thread configuration to optimize for specific devices, any changes you make can have a negative performance impact on other devices or even the same devices in future operating system versions.</p>

<p><a name="thread-affinity"></a></p>

<h2>Thread affinity</h2>

<p>The affinity of a thread controls which CPU cores the thread should run on. For Android devices, cores usually fit into two categories:</p>

<ul>
<li>Big: Powerful cores that are battery power-intensive.</li>
<li>Little: Slower cores that are less battery power-intensive than big cores.</li>
</ul>

<p><strong>Important</strong>: For typical applications that target a variety of Android devices, don’t bind threads to specific cores.</p>

<h3>Identifying CPU cores</h3>

<p>Unity usually receives the capacity and big/little assignment for every CPU core from the device’s operating system. For older operating system versions, this information isn’t always available. In this case, Unity calculates the capacity of the CPU cores and uses that information to assign each core as either big or little. To assign a core, Unity compares the CPU capacity of each core to a threshold. By default, a core is big if it has at least double the CPU capacity of the slowest core, and is little otherwise.</p>

<p>For more control over which cores Unity assigns as big or little, you can provide a custom threshold. To provide a custom threshold, use the <code>-platform-android-cpucapacity-threshold [value]</code> command-line argument with a value between 0 and 1024 where 0 represents the lowest capacity core and 1024 represents the highest capacity core. For example, a value of <code>870</code>, which is approximately 85% of 1024, means that a core is big if its CPU capacity is in the top 15% of those on the chip. For information on how to add start-up command-line arguments to Unity on Android devices, see <a href="AndroidUnityPlayerActivity.html#StartupArguments">Specifying Unity startup arguments from a custom UnityPlayerActivity file</a>.</p>

<p><strong>Note</strong>: Unity always categorizes a core as either big or little. For some complex CPU topologies (for example, those that have medium cores), Unity still categorizes its cores as either big or little.</p>

<h3>Thread affinity aliases</h3>

<p>Unity provides the following aliases that you can use as the thread affinity value:</p>

<ul>
<li>
<code>any</code>: Allows the thread to run on any core.</li>
<li>
<code>little</code>: Allows the thread to run on any little core.</li>
<li>
<code>big</code>: Allows the thread to run on any big core.</li>
</ul>

<p>You can also use hexadecimal and binary values to specify thread affinity. In binary, the index of the bit references a specific CPU core. Typically, little cores start at index 0 and big cores come directly after them.</p>

<p>For example, if the CPU contains four little cores and four big cores:</p>

<ul>
<li>The binary value <code>0b11110000</code> and hexadecimal value <code>0xf0</code> allow the thread to run on big cores.</li>
<li>The binary value <code>0b1111</code> and hexadecimal value <code>0xf</code> allow the thread to run on little cores.</li>
</ul>

<p><a name="thread-priority"></a></p>

<h2>Thread priority</h2>

<p>The priority of a thread controls how the device’s operating system allocates CPU time to the thread. The operating system allocates more CPU time to threads with a higher priority relative to threads with a lower priority. </p>

<p>The thread priority values you can use in Unity are in the range of –20 to 19, where –20 indicates the highest priority and 19 indicates the lowest priority.</p>

<h2>Configurable Unity threads</h2>

<p>This section contains information about the Unity threads you can configure, and which command-line arguments you use to configure them.</p>

<p>For information on how to add startup command-line arguments to Unity on Android devices, see <a href="AndroidUnityPlayerActivity##StartupArguments">Specifying Unity startup arguments from a custom UnityPlayerActivity file</a>.</p>

<h3>Unity main thread</h3>

<p>Unity’s main thread executes all scripts and usually has a high CPU load. The command-line arguments that affect this thread are:</p>

<ul>
<li>
<code>-platform-android-unitymain-priority [value]</code> where <code>[value]</code> is the <a href="#thread-priority">priority</a> of the thread.</li>
<li>
<code>-platform-android-unitymain-affinity [value]</code> where <code>[value]</code> is the <a href="#thread-affinity">affinity</a> of the thread.</li>
</ul>

<h3>Unity JobWorker threads</h3>

<p>Unity’s worker threads execute jobs from both the core engine and those your application dispatches via the <a href="JobSystem.html">C# Job System</a>. The command-line arguments that affect these threads are:</p>

<ul>
<li>
<code>-platform-android-jobworker-priority [value]</code> where <code>[value]</code> is the <a href="#thread-priority">priority</a> of the threads.</li>
<li>
<code>-platform-android-jobworker-affinity [value] [value1 value2 value3]</code> where <code>[value]</code> is the <a href="#thread-affinity">affinity</a> of the thread and <code>[value1 value2 value3]</code> are optional values you can use to specify the affinity of worker threads per thread. If you only set a single value, Unity uses the same value for all worker threads. You can use ’-job-worker-count’ to specify the number of worker threads.</li>
</ul>

<h3>Unity render thread</h3>

<p>Unity’s render thread interacts with the Graphics API if your project uses <a href="../ScriptReference/Rendering.RenderingThreadingMode.MultiThreaded.html">multithreaded rendering</a>.</p>

<ul>
<li>
<code>-platform-android-gfxdeviceworker-priority [value]</code> where <code>[value]</code> is the <a href="#thread-priority">priority</a> of the thread.</li>
<li>
<code>-platform-android-gfxdeviceworker-affinity [value]</code> where <code>[value]</code> is the <a href="#thread-affinity">affinity</a> of the thread.</li>
</ul>

<p><strong>Note</strong>: If you use GraphicsJobs, JobWorker threads also interact with the Graphics API.</p>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="deep-linking-android.html"></a></span><div class="tip">Deep linking on Android</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="android-device-features-and-permissions.html"></a></span><div class="tip">Device features and permissions</div>
</div>
</div>
</div>
<div class="footer-wrapper">
<div class="footer clear">
<div class="copy">Copyright © 2022 Unity Technologies. Publication 2021.3</div>
<div class="menu">
<a href="https://learn.unity.com/">教程</a><a href="https://answers.unity3d.com">社区答案</a><a href="https://support.unity3d.com/hc/en-us">知识库</a><a href="https://forum.unity3d.com">论坛</a><a href="https://unity3d.com/asset-store">Asset Store</a>
</div>
</div>
<div></div>
</div>
</div></div></div>
</div>
</body>
</html>
